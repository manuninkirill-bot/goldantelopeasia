# Стратегия парсинга - Защита от Rate Limit

## Проблема
Telegram наложил rate limit на парсер при частых запросах к API. Требует ожидание ~21 часа.

## Решение - МЕНЕЕ АГРЕССИВНЫЙ РЕЖИМ

### 1. Chat Parser (Таблица обновлений каждую минуту)
- **Сообщений на канал**: 5
- **Задержка между каналами**: 0.5 сек
- **Интервал**: каждую минуту
- ✅ Работает стабильно

### 2. Additional Parser (дополнительные каналы)
- **Сообщений на канал**: 15 (было 30)
- **Задержка между каналами**: 2.5 сек (НОВОЕ)
- **Интервал**: каждые 5 минут
- ✅ Менее агрессивно

### 3. Auto Parser / Channel Parser (основной парсинг)
- **Сообщений на канал**: 25 (было 100)
- **Задержка между каналами**: 3.5 сек (было 2-3 сек)
- **Интервал**: каждые 10 минут
- ✅ Безопасный режим

## Сравнение - ДО vs ПОСЛЕ

| Параметр | ДО | ПОСЛЕ |
|----------|-------|---------|
| Сообщений/канал | 100 | 25 |
| Задержка (сек) | 2-3 | 3.5 |
| API запросов/час | ~7500 | ~1200 |
| Риск блокировки | ВЫСОКИЙ | НИЗКИЙ |

## Что изменилось?

### Меньше запросов
- channel_parser: 100 → 25 сообщений (75% уменьшение)
- additional_parser: 30 → 15 сообщений (50% уменьшение)

### Больше времени между запросами
- additional_parser: добавлена 2.5 сек задержка
- chat_parser: 0.3 → 0.5 сек (увеличена)

### Упрощена логика
- Убрали сложные функции классификации
- Сосредоточились на одном режиме: низкий

## Результат

✅ **Безопасность**: Меньше шанс блокировки
✅ **Скорость**: Медленнее, но стабильнее  
✅ **Надежность**: Будет работать 24/7

## Когда блокировка сбросится?
⏳ Auto Parser восстановится через ~21 час

## Мониторинг
Если видишь rate limit ошибки → парсеры сами будут ждать

