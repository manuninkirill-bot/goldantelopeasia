<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goldantelope ASIA</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #ffffff;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(200, 200, 200, 0.05) 10px, rgba(200, 200, 200, 0.05) 20px),
                repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(200, 200, 200, 0.05) 10px, rgba(200, 200, 200, 0.05) 20px);
            color: #333; 
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        .header { 
            margin-bottom: 30px; 
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            border: 3px solid #d4af37;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .header-top {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: space-between;
        }
        .header-logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .header-logo {
            height: 60px;
            width: auto;
            border-radius: 6px;
        }
        .header h1 { 
            font-size: 28px; 
            margin: 0;
            color: #333; 
            flex: 1;
        }
        .country-selector { 
            display: flex; 
            gap: 10px;
            border: 2px solid #d4af37;
            padding: 10px 15px;
            border-radius: 8px;
        }
        .country-btn { padding: 10px 20px; border: 2px solid #ddd; background: #fff; cursor: pointer; border-radius: 6px; font-size: 14px; color: #666; transition: all 0.2s; }
        .country-btn.active { border-color: #d4af37; background: #d4af37; color: #333; }
        .country-btn:hover { border-color: #d4af37; }
        .rates-display {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            padding: 12px 15px;
            background: #fafafa;
            border-radius: 8px;
            align-items: center;
            justify-content: center;
            border: 1px solid #e0e0e0;
        }
        .rate-item {
            text-align: center;
        }
        .rate-label {
            font-size: 11px;
            color: #999;
            font-weight: 600;
            margin-bottom: 4px;
        }
        .rate-value {
            font-size: 14px;
            color: #d4af37;
            font-weight: bold;
        }
        .status-bar { display: none; }
        .status-item { display: none; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; }
        .status-dot.online { background: #31a24c; }
        .status-dot.offline { background: #f04747; }
        
        .tabs { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
            gap: 8px; 
            margin-bottom: 20px;
            padding: 12px;
            background: #ffffff;
            border-radius: 8px;
        }
        .tab { 
            padding: 15px 10px; 
            cursor: pointer; 
            border: none; 
            background: transparent;
            color: #333; 
            font-size: 10px; 
            border-radius: 12px;
            transition: all 0.3s;
            font-weight: 600;
            text-align: center;
            box-shadow: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .tab.active { 
            background: #ffffff;
            color: #333;
            border: 2px solid #d4af37;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
            transform: scale(1.1);
            opacity: 1;
        }
        .tab:hover { 
            transform: translateY(-5px);
            opacity: 0.8;
        }
        .tab.active:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .content { 
            display: none;
            background: #ffffff;
            padding: 0;
            border-radius: 8px;
        }
        .content > .listing-grid,
        .content > .empty,
        .content > .loading {
            padding: 15px;
        }
        .content.active { display: block; }
        
        .listing-grid { 
            display: grid !important; 
            grid-template-columns: repeat(3, 1fr) !important; 
            gap: 15px !important; 
            margin-bottom: 30px; 
            width: 100%;
        }
        
        @media (max-width: 992px) {
            .listing-grid { grid-template-columns: repeat(2, 1fr) !important; }
        }
        
        @media (max-width: 600px) {
            .listing-grid { grid-template-columns: 1fr !important; gap: 12px !important; }
        }
        
        .card {
            background: #ffffff;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #e0e0e0;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
            min-height: 150px;
        }
        
        .card h3 {
            font-size: 14px;
            margin-bottom: 8px;
            color: #0084ff;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            line-height: 1.3;
            max-height: 2.6em;
        }
        
        .card p {
            font-size: 12px;
            color: #666;
            line-height: 1.5;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            max-height: 6em;
        }
        
        .card-slider {
            position: relative;
            width: 100%;
            height: 180px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
            background: #f0f0f0;
        }
        
        .card-slider img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .card-slider img.active {
            opacity: 1;
        }
        
        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            background: rgba(0,0,0,0.4);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            z-index: 10;
        }
        
        .slider-nav:hover { background: rgba(0,0,0,0.7); }
        .slider-nav.prev { left: 5px; }
        .slider-nav.next { right: 5px; }
        
        .slider-dots {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 4px;
            z-index: 10;
        }
        
        .slider-dot {
            width: 6px;
            height: 6px;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
        }
        
        .slider-dot.active {
            background: #fff;
        }
        .card:hover { border-color: #0084ff; background: #f9f9f9; box-shadow: 0 2px 8px rgba(0,132,255,0.1); }
        .card h3 { font-size: 16px; margin-bottom: 8px; color: #0084ff; }
        .card p { font-size: 13px; color: #666; line-height: 1.6; }
        .card .meta { font-size: 12px; color: #999; margin-top: 10px; }
        
        .filters {
            background: #f5f5f5;
            padding: 12px 0;
            border-radius: 0;
            margin-bottom: 15px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
            border: none;
            border-bottom: 1px solid #e0e0e0;
        }
        .filters input, .filters select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .tour-grid-container {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            .tour-city-btn {
                border-width: 4px !important;
            }
            .tour-city-btn .city-info {
                padding: 6px !important;
            }
            .tour-city-btn .city-name {
                font-weight: bold;
                font-size: 14px !important;
            }
            .tour-count {
                font-size: 11px !important;
            }
        }

            padding: 8px 12px;
            background: #ffffff;
            border: 1px solid #ddd;
            color: #333;
            border-radius: 4px;
            font-size: 13px;
        }
        .filters input:focus, .filters select:focus {
            outline: none;
            border-color: #0084ff;
            box-shadow: 0 0 0 2px rgba(0,132,255,0.1);
        }
        
        .btn {
            padding: 8px 16px;
            background: #0084ff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        .btn:hover { background: #0073e6; }
        .btn.secondary { background: #f0f0f0; color: #333; border: 1px solid #ddd; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 15px; }
        .stat-box { background: #ffffff; padding: 15px; border-radius: 8px; text-align: center; border: 2px solid #d4af37; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .stat-box .number { font-size: 28px; font-weight: bold; color: #d4af37; margin-bottom: 5px; }
        .stat-box .label { font-size: 12px; color: #666; }
        
        .category-link {
            cursor: pointer;
            color: #0084ff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            border-radius: 4px;
            padding: 2px 4px;
        }
        .category-link:hover {
            text-decoration: underline;
            background: rgba(0, 132, 255, 0.1);
        }
        
        .loading { text-align: center; padding: 40px; color: #999; }
        .spinner { display: inline-block; width: 20px; height: 20px; border: 2px solid #e0e0e0; border-top-color: #0084ff; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .empty { text-align: center; padding: 40px; color: #999; }
        
        .banner {
            width: 100%;
            height: 125px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-color: #f5f5f5;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            position: relative;
            display: block;
            z-index: 5;
            overflow: hidden;
            border: 3px solid #d4af37;
        }

        /* Responsive banner sizes */
        @media (max-width: 1024px) {
            .banner { height: 100px; }
        }
        
        @media (max-width: 768px) {
            .banner { height: 80px; margin-bottom: 15px; }
        }

        @media (max-width: 480px) {
            .banner { height: 60px; margin-bottom: 10px; }
        }
        
        .banner-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex !important;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.2s;
            z-index: 100;
            pointer-events: auto;
        }
        
        .banner-nav:hover {
            background: rgba(212, 175, 55, 0.8);
            color: #333;
        }
        
        .banner-nav.prev { left: 10px; }
        .banner-nav.next { right: 10px; }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .tab img {
            width: 62px;
            height: 62px;
            object-fit: contain;
        }
        
        .tab span {
            font-size: 11px;
            max-width: 100px;
            word-break: break-word;
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            
            .header {
                margin-bottom: 20px;
                padding: 15px;
                border: 2px solid #d4af37;
            }
            
            .header-top {
                flex-direction: column;
                gap: 15px;
                margin-bottom: 15px;
            }
            
            .header-logo-section {
                width: 100%;
                justify-content: center;
            }
            
            .header-logo {
                height: 50px;
            }
            
            .header h1 {
                font-size: 20px;
                text-align: center;
            }
            
            .country-selector {
                flex-wrap: wrap;
                justify-content: center;
                width: 100%;
                gap: 8px;
                padding: 8px 10px;
                border: 2px solid #d4af37;
            }
            
            .country-btn {
                padding: 8px 12px;
                font-size: 12px;
                flex: 1;
                min-width: 80px;
            }
            
            .banner {
                height: auto;
                aspect-ratio: 21 / 9;
                min-height: 120px;
                margin-bottom: 15px;
            }
            
            .tabs {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
                gap: 8px;
                margin-bottom: 20px;
                padding: 12px;
                border-radius: 6px;
            }
            
            .tab {
                padding: 15px 10px;
                font-size: 9px;
                gap: 4px;
            }
            
            .tab img {
                width: 50px;
                height: 50px;
            }
            
            .tab span {
                font-size: 9px;
                max-width: 80px;
                line-height: 1.2;
            }
            
            .content {
                padding: 0;
                border-radius: 6px;
            }
            
            .content > .listing-grid,
            .content > .empty,
            .content > .loading {
                padding: 12px;
            }
            
            .grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .card {
                padding: 12px;
                border-radius: 6px;
            }
            
            .card h3 {
                font-size: 14px;
            }
            
            .card p {
                font-size: 12px;
            }
            
            .card .meta {
                font-size: 11px;
            }
            
            .filters {
                padding: 10px 0;
                grid-template-columns: 1fr;
                gap: 8px;
                border-radius: 0;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .filters input, .filters select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .tour-grid-container {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            .tour-city-btn {
                border-width: 4px !important;
            }
            .tour-city-btn .city-info {
                padding: 6px !important;
            }
            .tour-city-btn .city-name {
                font-weight: bold;
                font-size: 14px !important;
            }
            .tour-count {
                font-size: 11px !important;
            }
        }

                padding: 8px 10px;
                font-size: 12px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .stat-box {
                padding: 12px;
                border-radius: 6px;
                border: 2px solid #d4af37;
            }
            
            .stat-box .number {
                font-size: 20px;
            }
            
            .stat-box .label {
                font-size: 11px;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 12px;
            }
            
            .loading, .empty {
                padding: 30px;
            }
        }
        
        /* –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã (< 480px) */
        @media (max-width: 480px) {
            .container { padding: 8px; }
            
            .content {
                padding: 0;
            }
            
            .content > .listing-grid,
            .content > .empty,
            .content > .loading {
                padding: 10px;
            }
            
            .filters {
                padding: 8px 0;
                border-radius: 0;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .filters input, .filters select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .tour-grid-container {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            .tour-city-btn {
                border-width: 4px !important;
            }
            .tour-city-btn .city-info {
                padding: 6px !important;
            }
            .tour-city-btn .city-name {
                font-weight: bold;
                font-size: 14px !important;
            }
            .tour-count {
                font-size: 11px !important;
            }
        }

                padding: 6px 8px;
                width: 100%;
                box-sizing: border-box;
            }
            
            .header {
                padding: 10px;
                margin-bottom: 15px;
            }
            
            .header-top {
                gap: 10px;
            }
            
            .header-logo {
                height: 40px;
            }
            
            .header h1 {
                font-size: 16px;
            }
            
            .country-selector {
                padding: 6px 8px;
                gap: 6px;
            }
            
            .country-btn {
                padding: 6px 10px;
                font-size: 11px;
                min-width: 70px;
            }
            
            .banner {
                height: auto;
                aspect-ratio: 16 / 9;
                min-height: 100px;
                margin-bottom: 10px;
            }
            
            .tabs {
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
                gap: 6px;
                padding: 10px;
                margin-bottom: 15px;
            }
            
            .tab {
                padding: 12px 8px;
                font-size: 8px;
                gap: 2px;
            }
            
            .tab img {
                width: 45px;
                height: 45px;
            }
            
            .tab span {
                font-size: 8px;
                max-width: 70px;
            }
            
            .content {
                padding: 10px;
            }
            
            .grid {
                gap: 10px;
            }
            
            .card {
                padding: 10px;
            }
            
            .card h3 {
                font-size: 13px;
            }
            
            .card p {
                font-size: 11px;
            }
            
            .filters {
                padding: 10px;
                gap: 6px;
            }
            
            .filters input, .filters select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .tour-grid-container {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 12px !important;
            }
            .tour-city-btn {
                border-width: 4px !important;
            }
            .tour-city-btn .city-info {
                padding: 6px !important;
            }
            .tour-city-btn .city-name {
                font-weight: bold;
                font-size: 14px !important;
            }
            .tour-count {
                font-size: 11px !important;
            }
        }

                padding: 7px;
                font-size: 11px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .stat-box {
                padding: 10px;
            }
            
            .stat-box .number {
                font-size: 18px;
            }
            
            .stat-box .label {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-top">
                <img src="/static/images/logo.png" alt="Goldantelope" style="height: 100px; width: auto;">
                <div class="country-selector">
                    <button class="country-btn active" onclick="switchCountry('vietnam')">üáªüá≥ –í—å–µ—Ç–Ω–∞–º</button>
                    <button class="country-btn" onclick="switchCountry('thailand')">üáπüá≠ –¢–∞–π–ª–∞–Ω–¥</button>
                    <button class="country-btn" onclick="switchCountry('india')">üáÆüá≥ –ò–Ω–¥–∏—è</button>
                    <button class="country-btn" onclick="switchCountry('indonesia')">üáÆüá© –ò–Ω–¥–æ–Ω–µ–∑–∏—è</button>
                </div>
                <div class="rates-display" id="rates-display">
                    <div class="rate-item">
                        <div class="rate-label"><span style="color: #d4af37;">‚Çø</span> BTC</div>
                        <div class="rate-value" id="btc-rate">$--</div>
                    </div>
                    <div class="rate-item">
                        <div class="rate-label">üíµ <span id="local-pair">VND/USDT</span></div>
                        <div class="rate-value" id="local-rate">--</div>
                    </div>
                    <div class="rate-item">
                        <div class="rate-label">üíµ <span id="rub-pair">RUB/VND</span></div>
                        <div class="rate-value" id="rub-rate">--</div>
                    </div>
                    <div class="rate-item">
                        <div class="rate-label">üë• –ù–∞ –ø–æ—Ä—Ç–∞–ª–µ</div>
                        <div class="rate-value" id="online-count">--</div>
                    </div>
                </div>
            </div>
            
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-dot online"></span>
                    <span>–ü–∞—Ä—Å–µ—Ä: <strong id="parser-status">–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</strong></span>
                </div>
                <div class="status-item">
                    <span>–í—Å–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: <strong id="total-items">0</strong></span>
                </div>
                <div class="status-item">
                    <span>–û–±–Ω–æ–≤–ª–µ–Ω–æ: <strong id="last-update">--:--</strong></span>
                </div>
            </div>
        </div>

        <div id="banner" class="banner">
            <button class="banner-nav prev" onclick="event.stopPropagation(); changeBanner(-1)">‚Äπ</button>
            <button class="banner-nav next" onclick="event.stopPropagation(); changeBanner(1)">‚Ä∫</button>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="entertainment" onclick="switchTab('entertainment')"><img src="/static/icons/entertainment.jpg" alt="–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è"><span>–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</span></button>
            <button class="tab" data-tab="restaurants" onclick="switchTab('restaurants')"><img src="/static/images/icons/restaurants.jpg" alt="–†–µ—Å—Ç–æ—Ä–∞–Ω—ã"><span>–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</span></button>
            <button class="tab" data-tab="tours" onclick="switchTab('tours')"><img src="/static/images/icons/tours.jpg" alt="–≠–∫—Å–∫—É—Ä—Å–∏–∏"><span>–≠–∫—Å–∫—É—Ä—Å–∏–∏</span></button>
            <button class="tab" data-tab="transport" onclick="switchTab('transport')"><img src="/static/icons/transport.png" alt="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"><span>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span></button>
            <button class="tab" data-tab="realestate" onclick="switchTab('realestate')"><img src="/static/icons/realestate.png" alt="–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å"><span>–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</span></button>
            <button class="tab" data-tab="exchange" onclick="switchTab('exchange')"><img src="/static/icons/exchange.png" alt="–û–±–º–µ–Ω"><span>–û–±–º–µ–Ω –¥–µ–Ω–µ–≥</span></button>
            <button class="tab" data-tab="settings" onclick="switchTab('settings')"><img src="/static/icons/kids_new.png" alt="–î–ª—è –¥–µ—Ç–µ–π"><span>–î–ª—è –¥–µ—Ç–µ–π</span></button>
            <button class="tab" data-tab="marketplace" onclick="switchTab('marketplace')"><img src="/static/images/icons/marketplace.jpg" alt="–ë–∞—Ä–∞—Ö–æ–ª–∫–∞"><span>–ë–∞—Ä–∞—Ö–æ–ª–∫–∞</span></button>
            <button class="tab" data-tab="visas" onclick="switchTab('visas')"><img src="/static/icons/visas.jpg" alt="–í–∏–∑–∞—Ä–∞–Ω"><span>–í–∏–∑–∞—Ä–∞–Ω</span></button>
            <button class="tab" data-tab="news" onclick="switchTab('news')"><img src="/static/images/icons/news.jpg" alt="–ù–æ–≤–æ—Å—Ç–∏"><span>–ù–æ–≤–æ—Å—Ç–∏</span></button>
            <button class="tab" data-tab="medicine" onclick="switchTab('medicine')"><img src="/static/icons/medicine_new.png" alt="–ú–µ–¥–∏—Ü–∏–Ω–∞"><span>–ú–µ–¥–∏—Ü–∏–Ω–∞</span></button>
            <button class="tab" data-tab="chat" onclick="switchTab('chat')"><img src="/static/images/icons/chat.jpg" alt="–ß–∞—Ç"><span>–ß–∞—Ç</span></button>
            <button class="tab" data-tab="stats" onclick="switchTab('stats')"><img src="/static/icons/statistics.png" alt="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"><span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span></button>
            <button class="tab" data-tab="admin" onclick="switchTab('admin')" style="margin-left: auto;"><span>‚öôÔ∏è –ê–¥–º–∏–Ω</span></button>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div id="stats" class="content">
            <div class="stats-grid" id="stats-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
            
            <div style="margin-top: 20px; background: white; border-radius: 12px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h3 style="margin: 0 0 15px 0; color: #333; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                    <img src="/static/icons/stats-chart.png" alt="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" style="width: 24px; height: 24px; object-fit: contain;"> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º
                    <span id="stats-updated" style="font-size: 12px; color: #888; font-weight: normal; margin-left: auto;"></span>
                </h3>
                <div style="overflow-x: auto;">
                    <table id="groups-table" style="width: 100%; border-collapse: collapse; font-size: 13px;">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #d4af37 0%, #f4d03f 100%); color: white;">
                                <th style="padding: 10px; text-align: left; border-radius: 8px 0 0 0;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th style="padding: 10px; text-align: center;">–ì—Ä—É–ø–ø</th>
                                <th style="padding: 10px; text-align: center;">–û—Ö–≤–∞—Ç</th>
                                <th style="padding: 10px; text-align: center;">–û–Ω–ª–∞–π–Ω</th>
                                <th style="padding: 10px; text-align: center; border-radius: 0 8px 0 0;">–û–±—ä—è–≤–ª–µ–Ω–∏–π</th>
                            </tr>
                        </thead>
                        <tbody id="groups-tbody">
                            <tr><td colspan="5" style="text-align: center; padding: 20px; color: #888;">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
                        </tbody>
                        <tfoot id="groups-tfoot" style="background: #f8f9fa; font-weight: bold;">
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <!-- –†–µ—Å—Ç–æ—Ä–∞–Ω—ã -->
        <div id="restaurants" class="content">
            <div id="vietnam-restaurants-buttons" style="display: none; padding: 20px;">
                <div class="tour-grid-container" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div class="tour-city-btn restaurant-city-btn" data-city="–ù—è—á–∞–Ω–≥" onclick="filterRestaurantsByCity('–ù—è—á–∞–Ω–≥')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #d4af37;">
                        <img src="/static/images/restaurants/nyachang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ù—è—á–∞–Ω–≥</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">106 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–•–æ—à–∏–º–∏–Ω" onclick="filterRestaurantsByCity('–•–æ—à–∏–º–∏–Ω')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/hochiminh.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–æ—à–∏–º–∏–Ω</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">74 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–î–∞–Ω–∞–Ω–≥" onclick="filterRestaurantsByCity('–î–∞–Ω–∞–Ω–≥')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/danang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–î–∞–Ω–∞–Ω–≥</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">95 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–•–∞–Ω–æ–π" onclick="filterRestaurantsByCity('–•–∞–Ω–æ–π')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/hanoi.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–∞–Ω–æ–π</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">3 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–§—É–∫—É–æ–∫" onclick="filterRestaurantsByCity('–§—É–∫—É–æ–∫')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/phuquoc.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–§—É–∫—É–æ–∫</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">3 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–§–∞–Ω—Ç—å–µ—Ç" onclick="filterRestaurantsByCity('–§–∞–Ω—Ç—å–µ—Ç')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/phanthiet.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–§–∞–Ω—Ç—å–µ—Ç</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">3 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–ö–∞–º—Ä–∞–Ω—å" onclick="filterRestaurantsByCity('–ö–∞–º—Ä–∞–Ω—å')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/kamran.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ö–∞–º—Ä–∞–Ω—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">3 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–î–∞–ª–∞—Ç" onclick="filterRestaurantsByCity('–î–∞–ª–∞—Ç')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/dalat.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–î–∞–ª–∞—Ç</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">3 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn restaurant-city-btn" data-city="–•–æ–π–∞–Ω" onclick="filterRestaurantsByCity('–•–æ–π–∞–Ω')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/restaurants/hoian.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–æ–π–∞–Ω</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">3 —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</div>
                        </div>
                    </div>
                    <div class="tour-city-btn" onclick="switchTab('submit-restaurant'); loadRestaurantCaptcha();" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #4CAF50;">
                        <img src="/static/images/submit_listing.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üìù –ü–æ–¥–∞—Ç—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #4CAF50;">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="filters" style="display: flex; gap: 10px; padding: 15px; flex-wrap: wrap;">
                <button onclick="searchNearby5km()" class="nearby-btn" style="padding: 10px 20px; background: #4285F4; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üìç –ò—Å–∫–∞—Ç—å –≤ —Ä–∞–¥–∏—É—Å–µ 5 –∫–º</button>
                <span style="border-left: 2px solid #ddd; margin: 0 5px;"></span>
                <button onclick="filterRestaurantType('all')" class="rest-type-btn active" data-type="all" style="padding: 10px 20px; background: #d4af37; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üçΩÔ∏è –í—Å–µ</button>
                <button onclick="filterRestaurantType('—Ä–µ—Å—Ç–æ—Ä–∞–Ω')" class="rest-type-btn" data-type="—Ä–µ—Å—Ç–æ—Ä–∞–Ω" style="padding: 10px 20px; background: #fff; color: #333; border: 2px solid #FF5722; border-radius: 8px; cursor: pointer; font-weight: 600;">üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω—ã</button>
                <button onclick="filterRestaurantType('–∫–∞—Ñ–µ')" class="rest-type-btn" data-type="–∫–∞—Ñ–µ" style="padding: 10px 20px; background: #fff; color: #333; border: 2px solid #795548; border-radius: 8px; cursor: pointer; font-weight: 600;">‚òï –ö–∞—Ñ–µ</button>
                <button onclick="filterRestaurantType('–±–∞—Ä')" class="rest-type-btn" data-type="–±–∞—Ä" style="padding: 10px 20px; background: #fff; color: #333; border: 2px solid #9C27B0; border-radius: 8px; cursor: pointer; font-weight: 600;">üç∏ –ë–∞—Ä—ã</button>
                <button onclick="filterRestaurantType('–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç')" class="rest-type-btn" data-type="–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç" style="padding: 10px 20px; background: #fff; color: #333; border: 2px solid #00BCD4; border-radius: 8px; cursor: pointer; font-weight: 600;">ü¶ê –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã</button>
                <button onclick="filterRestaurantType('high_rating')" class="rest-type-btn" data-type="high_rating" style="padding: 10px 20px; background: #fff; color: #333; border: 2px solid #FFC107; border-radius: 8px; cursor: pointer; font-weight: 600;">‚≠ê –í—ã—Å–æ–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥</button>
            </div>
            <div class="listing-grid" id="restaurants-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –≠–∫—Å–∫—É—Ä—Å–∏–∏ -->
        <div id="tours" class="content">
            <div id="vietnam-tours-buttons" style="padding: 20px;">
                <div class="tour-grid-container" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div class="tour-city-btn tours-city-btn" data-city="–ù—è—á–∞–Ω–≥" onclick="filterToursByCity('–ù—è—á–∞–Ω–≥')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #d4af37;">
                        <img src="/static/images/tours/nyachang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ù—è—á–∞–Ω–≥</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">58 —ç–∫—Å–∫—É—Ä—Å–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–•–æ—à–∏–º–∏–Ω" onclick="filterToursByCity('–•–æ—à–∏–º–∏–Ω')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/hochiminh.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–æ—à–∏–º–∏–Ω</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">33 —ç–∫—Å–∫—É—Ä—Å–∏–∏</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–•–∞–Ω–æ–π" onclick="filterToursByCity('–•–∞–Ω–æ–π')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/hanoi.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–∞–Ω–æ–π</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">15 —ç–∫—Å–∫—É—Ä—Å–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–§—É–∫—É–æ–∫" onclick="filterToursByCity('–§—É–∫—É–æ–∫')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/phuquoc.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–§—É–∫—É–æ–∫</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">27 —ç–∫—Å–∫—É—Ä—Å–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–§–∞–Ω—Ç—å–µ—Ç" onclick="filterToursByCity('–§–∞–Ω—Ç—å–µ—Ç')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/phanthiet.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–§–∞–Ω—Ç—å–µ—Ç</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">15 —ç–∫—Å–∫—É—Ä—Å–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–ú—É–π–Ω–µ" onclick="filterToursByCity('–ú—É–π–Ω–µ')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/muine.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ú—É–π–Ω–µ</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">6 —ç–∫—Å–∫—É—Ä—Å–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–î–∞–Ω–∞–Ω–≥" onclick="filterToursByCity('–î–∞–Ω–∞–Ω–≥')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/danang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–î–∞–Ω–∞–Ω–≥</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">16 —ç–∫—Å–∫—É—Ä—Å–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–ö–∞–º—Ä–∞–Ω—å" onclick="filterToursByCity('–ö–∞–º—Ä–∞–Ω—å')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/kamran.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ö–∞–º—Ä–∞–Ω—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">2 —ç–∫—Å–∫—É—Ä—Å–∏–∏</div>
                        </div>
                    </div>
                    <div class="tour-city-btn tours-city-btn" data-city="–î–∞–ª–∞—Ç" onclick="filterToursByCity('–î–∞–ª–∞—Ç')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/tours/dalat.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–î–∞–ª–∞—Ç</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">2 —ç–∫—Å–∫—É—Ä—Å–∏–∏</div>
                        </div>
                    </div>
                    <div class="tour-city-btn" onclick="switchTab('submit-tour'); loadTourCaptcha();" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #4CAF50;">
                        <img src="/static/images/submit_listing.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üìù –ü–æ–¥–∞—Ç—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #4CAF50;">–î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏—é</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="listing-grid" id="tours-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ —ç–∫—Å–∫—É—Ä—Å–∏–∏ -->
        <div id="submit-tour" class="content">
            <div style="max-width: 600px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 22px;">üß≥ –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–∫—É—Ä—Å–∏—é</h2>
                    <p style="margin: 0; opacity: 0.9;">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é —ç–∫—Å–∫—É—Ä—Å–∏—é. –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–Ω–∞ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.</p>
                </div>

                <form id="submit-tour-form" style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                        <input type="text" id="tour-title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –î–∞–ª–∞—Ç –∑–∞ 2 –¥–Ω—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea id="tour-description" required rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å–∫—É—Ä—Å–∏–∏, –º–∞—Ä—à—Ä—É—Ç, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; resize: vertical;"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π</label>
                            <select id="tour-days" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                                <option value="1">1 –¥–µ–Ω—å</option>
                                <option value="2">2 –¥–Ω—è</option>
                                <option value="3">3 –¥–Ω—è</option>
                                <option value="4">4 –¥–Ω—è</option>
                                <option value="5">5 –¥–Ω–µ–π</option>
                                <option value="7">7 –¥–Ω–µ–π</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üí∞ –¶–µ–Ω–∞ ($)</label>
                            <input type="number" id="tour-price" placeholder="55" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                            <input type="text" id="tour-location" placeholder="–í—ã–µ–∑–¥ –∏–∑ –ù—è—á–∞–Ω–≥–∞" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üèôÔ∏è –ì–æ—Ä–æ–¥</label>
                            <select id="tour-city" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                                <option value="Nha Trang">–ù—è—á–∞–Ω–≥</option>
                                <option value="Ho Chi Minh">–•–æ—à–∏–º–∏–Ω</option>
                                <option value="Da Nang">–î–∞–Ω–∞–Ω–≥</option>
                                <option value="Hanoi">–•–∞–Ω–æ–π</option>
                                <option value="Phu Quoc">–§—É–∫—É–æ–∫</option>
                                <option value="Phan Thiet">–§–∞–Ω—Ç—å–µ—Ç</option>
                                <option value="Cam Ranh">–ö–∞–º—Ä–∞–Ω—å</option>
                                <option value="Da Lat">–î–∞–ª–∞—Ç</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                        <input type="text" id="tour-contact-name" placeholder="–í–∞—à–µ –∏–º—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #25D366;">üí¨ WhatsApp *</label>
                            <input type="text" id="tour-whatsapp" required placeholder="84797016179" style="width: 100%; padding: 12px; border: 1px solid #25D366; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #0088cc;">‚úàÔ∏è Telegram</label>
                            <input type="text" id="tour-telegram" placeholder="@username" style="width: 100%; padding: 12px; border: 1px solid #0088cc; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë• –ì—Ä—É–ø–ø–∞ –º–∞–∫—Å–∏–º—É–º —á–µ–ª–æ–≤–µ–∫</label>
                        <div style="display: flex; gap: 20px;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="tour-group-size" value="5" checked> –¥–æ 5
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="tour-group-size" value="10"> –¥–æ 10
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="tour-group-size" value="20"> –¥–æ 20
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="tour-group-size" value="50"> –¥–æ 50
                            </label>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üì∑ –§–æ—Ç–æ (–¥–æ 4 —à—Ç, –º–∞–∫—Å 1 –ú–ë –∫–∞–∂–¥–æ–µ)</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <input type="file" id="tour-photo-0" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="tour-photo-1" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="tour-photo-2" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="tour-photo-3" accept="image/*" style="font-size: 12px;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">ü§ñ –ö–∞–ø—á–∞ *</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span id="tour-captcha-question" style="font-size: 18px; font-weight: bold; color: #333;">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            <input type="text" id="tour-captcha" required placeholder="–û—Ç–≤–µ—Ç" style="width: 100px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; text-align: center;">
                            <button type="button" onclick="loadTourCaptcha()" style="padding: 10px; background: #eee; border: none; border-radius: 6px; cursor: pointer;">üîÑ</button>
                        </div>
                        <input type="hidden" id="tour-captcha-answer">
                    </div>

                    <div id="tour-submit-status" style="margin-bottom: 15px; font-size: 14px; display: none;"></div>

                    <button type="submit" style="width: 100%; padding: 15px; background: #2196F3; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 16px;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
                </form>
            </div>
        </div>

        <!-- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç -->
        <div id="transport" class="content">
            <div id="vietnam-transport-buttons" style="padding: 20px;">
                <div class="tour-grid-container" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 25px; max-width: 1000px;">
                    <div class="tour-city-btn transport-type-btn" data-type="bikes" onclick="filterTransportByType('bikes')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #d4af37;">
                        <img src="/static/images/transport/bikes.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üèçÔ∏è –ë–∞–π–∫–∏</div>
                            <div class="tour-count" style="font-size: 14px; margin-top: 4px; color: #666;">–ù—è—á–∞–Ω–≥</div>
                        </div>
                    </div>
                    <div class="tour-city-btn transport-type-btn" data-type="cars" onclick="filterTransportByType('cars')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/transport/cars.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üöó –ê–≤—Ç–æ</div>
                            <div class="tour-count" style="font-size: 14px; margin-top: 4px; color: #666;">–ù—è—á–∞–Ω–≥</div>
                        </div>
                    </div>
                    <div class="tour-city-btn transport-type-btn" data-type="yachts" onclick="filterTransportByType('yachts')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/transport/yachts.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">‚õµ –Ø—Ö—Ç—ã</div>
                            <div class="tour-count" style="font-size: 14px; margin-top: 4px; color: #666;">–ù—è—á–∞–Ω–≥</div>
                        </div>
                    </div>
                    <div class="tour-city-btn transport-type-btn" data-type="bicycles" onclick="filterTransportByType('bicycles')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/transport/bicycles.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üö≤ –í–µ–ª–æ—Å–∏–ø–µ–¥—ã</div>
                            <div class="tour-count" style="font-size: 14px; margin-top: 4px; color: #666;">–ù—è—á–∞–Ω–≥</div>
                        </div>
                    </div>
                    <div class="tour-city-btn" onclick="switchTab('submit-transport'); loadTransportCaptcha();" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #4CAF50;">
                        <img src="/static/images/submit_listing.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üìù –ü–æ–¥–∞—Ç—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #4CAF50;">–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="filters">
                <input type="text" placeholder="–ú–æ–¥–µ–ª—å..." id="bike-model" onchange="loadListings('transport')">
                <input type="number" placeholder="–ì–æ–¥ –æ—Ç" id="bike-year" onchange="loadListings('transport')">
                <input type="number" placeholder="–¶–µ–Ω–∞ –æ—Ç" id="bike-price-min" onchange="loadListings('transport')">
                <input type="number" placeholder="–¶–µ–Ω–∞ –¥–æ" id="bike-price-max" onchange="loadListings('transport')">
            </div>
            <div class="listing-grid" id="transport-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ -->
        <div id="submit-transport" class="content">
            <div style="max-width: 600px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 22px;">üèçÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h2>
                    <p style="margin: 0; opacity: 0.9;">–î–æ–±–∞–≤—å—Ç–µ –±–∞–π–∫, –∞–≤—Ç–æ –∏–ª–∏ —è—Ö—Ç—É. –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.</p>
                </div>

                <form id="submit-transport-form" style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ù–∞–∑–≤–∞–Ω–∏–µ/–ú–æ–¥–µ–ª—å *</label>
                        <input type="text" id="transport-title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Honda Air Blade 125cc" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea id="transport-description" required rows="4" placeholder="–°–æ—Å—Ç–æ—è–Ω–∏–µ, –ø—Ä–æ–±–µ–≥, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; resize: vertical;"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üîß –û–±—ä—ë–º –¥–≤–∏–≥–∞—Ç–µ–ª—è (—Å—Å)</label>
                            <input type="number" id="transport-engine" placeholder="125" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìÖ –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</label>
                            <input type="number" id="transport-year" placeholder="2022" min="1990" max="2026" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üí∞ –¶–µ–Ω–∞ ($)</label>
                            <input type="number" id="transport-price" placeholder="500" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üè∑Ô∏è –¢–∏–ø</label>
                            <select id="transport-type" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                                <option value="bikes">üèçÔ∏è –ë–∞–π–∫</option>
                                <option value="cars">üöó –ê–≤—Ç–æ</option>
                                <option value="yachts">‚õµ –Ø—Ö—Ç–∞</option>
                                <option value="bicycles">üö≤ –í–µ–ª–æ—Å–∏–ø–µ–¥</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                            <input type="text" id="transport-location" placeholder="–ù—è—á–∞–Ω–≥, —Ü–µ–Ω—Ç—Ä" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üèôÔ∏è –ì–æ—Ä–æ–¥</label>
                            <select id="transport-city" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                                <option value="Nha Trang">–ù—è—á–∞–Ω–≥</option>
                                <option value="Ho Chi Minh">–•–æ—à–∏–º–∏–Ω</option>
                                <option value="Da Nang">–î–∞–Ω–∞–Ω–≥</option>
                                <option value="Hanoi">–•–∞–Ω–æ–π</option>
                                <option value="Phu Quoc">–§—É–∫—É–æ–∫</option>
                                <option value="Phan Thiet">–§–∞–Ω—Ç—å–µ—Ç</option>
                                <option value="Cam Ranh">–ö–∞–º—Ä–∞–Ω—å</option>
                                <option value="Da Lat">–î–∞–ª–∞—Ç</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                        <input type="text" id="transport-contact-name" placeholder="–í–∞—à–µ –∏–º—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #25D366;">üí¨ WhatsApp *</label>
                            <input type="text" id="transport-whatsapp" required placeholder="84797016179" style="width: 100%; padding: 12px; border: 1px solid #25D366; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #0088cc;">‚úàÔ∏è Telegram</label>
                            <input type="text" id="transport-telegram" placeholder="@username" style="width: 100%; padding: 12px; border: 1px solid #0088cc; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üì∑ –§–æ—Ç–æ (–¥–æ 4 —à—Ç, –º–∞–∫—Å 1 –ú–ë –∫–∞–∂–¥–æ–µ)</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <input type="file" id="transport-photo-0" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="transport-photo-1" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="transport-photo-2" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="transport-photo-3" accept="image/*" style="font-size: 12px;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">ü§ñ –ö–∞–ø—á–∞ *</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span id="transport-captcha-question" style="font-size: 18px; font-weight: bold; color: #333;">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            <input type="text" id="transport-captcha" required placeholder="–û—Ç–≤–µ—Ç" style="width: 100px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; text-align: center;">
                            <button type="button" onclick="loadTransportCaptcha()" style="padding: 10px; background: #eee; border: none; border-radius: 6px; cursor: pointer;">üîÑ</button>
                        </div>
                        <input type="hidden" id="transport-captcha-answer">
                    </div>

                    <div id="transport-submit-status" style="margin-bottom: 15px; font-size: 14px; display: none;"></div>

                    <button type="submit" style="width: 100%; padding: 15px; background: #FF9800; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 16px;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
                </form>
            </div>
        </div>

        <!-- –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å -->
        <div id="realestate" class="content">
            <div id="vietnam-realestate-buttons" style="padding: 20px;">
                <div class="tour-grid-container" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 25px; max-width: 1000px;">
                    <div class="tour-city-btn realestate-city-btn" data-city="nhatrang" onclick="filterRealEstateByCity('nhatrang')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #d4af37;">
                        <img src="/static/images/realestate_nhatrang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">–ù—è—á–∞–Ω–≥</div>
                            <div class="tour-count" id="realestate-nhatrang-count" style="font-size: 14px; margin-top: 4px; color: #666;">0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn realestate-city-btn" data-city="danang" onclick="filterRealEstateByCity('danang')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/realestate_danang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">–î–∞–Ω–∞–Ω–≥</div>
                            <div class="tour-count" id="realestate-danang-count" style="font-size: 14px; margin-top: 4px; color: #666;">0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn realestate-city-btn" data-city="hochiminh" onclick="filterRealEstateByCity('hochiminh')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/realestate_hochiminh.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">–•–æ—à–∏–º–∏–Ω</div>
                            <div class="tour-count" id="realestate-hochiminh-count" style="font-size: 14px; margin-top: 4px; color: #666;">0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn realestate-city-btn" data-city="hanoi" onclick="filterRealEstateByCity('hanoi')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/realestate_hanoi.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">–•–∞–Ω–æ–π</div>
                            <div class="tour-count" id="realestate-hanoi-count" style="font-size: 14px; margin-top: 4px; color: #666;">0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn realestate-city-btn" data-city="phuquoc" onclick="filterRealEstateByCity('phuquoc')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/realestate_phuquoc.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">–§—É–∫—É–æ–∫</div>
                            <div class="tour-count" id="realestate-phuquoc-count" style="font-size: 14px; margin-top: 4px; color: #666;">0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn realestate-city-btn" data-city="dalat" onclick="filterRealEstateByCity('dalat')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/realestate_dalat.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">–î–∞–ª–∞—Ç</div>
                            <div class="tour-count" id="realestate-dalat-count" style="font-size: 14px; margin-top: 4px; color: #666;">0 –æ–±—ä—è–≤–ª–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn" onclick="switchTab('submit-listing'); loadCaptcha();" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #4CAF50;">
                        <img src="/static/images/submit_listing.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üìù –ü–æ–¥–∞—Ç—å</div>
                            <div class="tour-count" style="font-size: 14px; margin-top: 4px; color: #666;">–æ–±—ä—è–≤–ª–µ–Ω–∏–µ</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="filters" style="display: flex; gap: 10px; padding: 15px; flex-wrap: wrap;">
                <button onclick="filterRealEstateType('rent')" class="filter-type-btn" id="filter-rent" style="padding: 10px 20px; background: #fff; border: 2px solid #2196F3; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">üîë –ê—Ä–µ–Ω–¥–∞</button>
                <button onclick="filterRealEstateType('sale')" class="filter-type-btn" id="filter-sale" style="padding: 10px 20px; background: #fff; border: 2px solid #4CAF50; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">üè† –ü—Ä–æ–¥–∞–∂–∞</button>
                <span style="border-left: 2px solid #ddd; margin: 0 5px;"></span>
                <button onclick="sortRealEstate('price_desc')" class="sort-btn" style="padding: 10px 20px; background: #fff; border: 2px solid #d4af37; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">üí∞ –î–æ—Ä–æ–∂–µ</button>
                <button onclick="sortRealEstate('price_asc')" class="sort-btn" style="padding: 10px 20px; background: #fff; border: 2px solid #d4af37; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">üíµ –î–µ—à–µ–≤–ª–µ</button>
                <button onclick="filterRealEstatePrice(7000000)" class="filter-btn" style="padding: 10px 20px; background: #fff; border: 2px solid #FF9800; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">–î–æ 7 –º–ª–Ω</button>
                <button onclick="filterRealEstatePrice(15000000)" class="filter-btn" style="padding: 10px 20px; background: #fff; border: 2px solid #FF9800; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">–î–æ 15 –º–ª–Ω</button>
                <button onclick="resetRealEstateFilters()" class="reset-btn" style="padding: 10px 20px; background: #fff; border: 2px solid #999; border-radius: 8px; cursor: pointer; font-weight: 600; color: #333;">‚úï –°–±—Ä–æ—Å</button>
            </div>
            <div class="listing-grid" id="real_estate-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –û–±–º–µ–Ω –¥–µ–Ω–µ–≥ -->
        <div id="exchange" class="content">
            <div class="listing-grid" id="exchange-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è -->
        <div id="entertainment" class="content">
            <div id="vietnam-entertainment-buttons" style="display: none; padding: 20px;">
                <div class="tour-grid-container" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div class="tour-city-btn entertainment-city-btn" data-city="–ù—è—á–∞–Ω–≥" onclick="filterEntertainmentByCity('–ù—è—á–∞–Ω–≥')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #d4af37;">
                        <img src="/static/images/entertainment/nyachang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ù—è—á–∞–Ω–≥</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">51 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–•–æ—à–∏–º–∏–Ω" onclick="filterEntertainmentByCity('–•–æ—à–∏–º–∏–Ω')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/hochiminh.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–æ—à–∏–º–∏–Ω</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">33 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–•–∞–Ω–æ–π" onclick="filterEntertainmentByCity('–•–∞–Ω–æ–π')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/hanoi.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–•–∞–Ω–æ–π</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">15 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–§—É–∫—É–æ–∫" onclick="filterEntertainmentByCity('–§—É–∫—É–æ–∫')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/phuquoc.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–§—É–∫—É–æ–∫</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">27 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–§–∞–Ω—Ç—å–µ—Ç" onclick="filterEntertainmentByCity('–§–∞–Ω—Ç—å–µ—Ç')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/phanthiet.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–§–∞–Ω—Ç—å–µ—Ç</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">15 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–ú—É–π–Ω–µ" onclick="filterEntertainmentByCity('–ú—É–π–Ω–µ')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/muine.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ú—É–π–Ω–µ</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">6 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–î–∞–Ω–∞–Ω–≥" onclick="filterEntertainmentByCity('–î–∞–Ω–∞–Ω–≥')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/danang.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–î–∞–Ω–∞–Ω–≥</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">16 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–ö–∞–º—Ä–∞–Ω—å" onclick="filterEntertainmentByCity('–ö–∞–º—Ä–∞–Ω—å')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/kamran.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–ö–∞–º—Ä–∞–Ω—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">8 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn entertainment-city-btn" data-city="–î–∞–ª–∞—Ç" onclick="filterEntertainmentByCity('–î–∞–ª–∞—Ç')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/entertainment/dalat.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 16px;">–î–∞–ª–∞—Ç</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #666;">12 —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π</div>
                        </div>
                    </div>
                    <div class="tour-city-btn" onclick="switchTab('submit-entertainment'); loadEntertainmentCaptcha();" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #4CAF50;">
                        <img src="/static/images/submit_listing.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="city-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div class="city-name" style="font-weight: bold; font-size: 18px;">üìù –ü–æ–¥–∞—Ç—å</div>
                            <div class="tour-count" style="font-size: 13px; margin-top: 4px; color: #4CAF50;">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="listing-grid" id="entertainment-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è -->
        <div id="submit-entertainment" class="content">
            <div style="max-width: 600px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #9C27B0 0%, #673AB7 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 22px;">üéÆ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ</h2>
                    <p style="margin: 0; opacity: 0.9;">–î–æ–±–∞–≤—å—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –∏–ª–∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ. –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.</p>
                </div>

                <form id="submit-entertainment-form" style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                        <input type="text" id="entertainment-title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í–µ—á–µ—Ä–∏–Ω–∫–∞ –Ω–∞ —è—Ö—Ç–µ" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea id="entertainment-description" required rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –ø—Ä–æ–≥—Ä–∞–º–º–∞..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; resize: vertical;"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">‚≠ê –§–∏—à–∫–∞</label>
                            <input type="text" id="entertainment-feature" placeholder="–ñ–∏–≤–∞—è –º—É–∑—ã–∫–∞, DJ..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                            <input type="text" id="entertainment-location" placeholder="–ü–ª—è–∂, –∫–ª—É–±, –æ—Ç–µ–ª—å..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üèôÔ∏è –ì–æ—Ä–æ–¥</label>
                        <select id="entertainment-city" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                            <option value="Nha Trang">–ù—è—á–∞–Ω–≥</option>
                            <option value="Ho Chi Minh">–•–æ—à–∏–º–∏–Ω</option>
                            <option value="Da Nang">–î–∞–Ω–∞–Ω–≥</option>
                            <option value="Hanoi">–•–∞–Ω–æ–π</option>
                            <option value="Phu Quoc">–§—É–∫—É–æ–∫</option>
                            <option value="Phan Thiet">–§–∞–Ω—Ç—å–µ—Ç</option>
                            <option value="Cam Ranh">–ö–∞–º—Ä–∞–Ω—å</option>
                            <option value="Da Lat">–î–∞–ª–∞—Ç</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                        <input type="text" id="entertainment-contact-name" placeholder="–í–∞—à–µ –∏–º—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #25D366;">üí¨ WhatsApp *</label>
                            <input type="text" id="entertainment-whatsapp" required placeholder="84797016179" style="width: 100%; padding: 12px; border: 1px solid #25D366; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #0088cc;">‚úàÔ∏è Telegram</label>
                            <input type="text" id="entertainment-telegram" placeholder="@username" style="width: 100%; padding: 12px; border: 1px solid #0088cc; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫</label>
                        <div style="display: flex; gap: 20px;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="entertainment-capacity" value="50" checked> –¥–æ 50
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="entertainment-capacity" value="100"> –¥–æ 100
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="entertainment-capacity" value="300"> –¥–æ 300
                            </label>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üì∑ –§–æ—Ç–æ (–¥–æ 4 —à—Ç, –º–∞–∫—Å 1 –ú–ë –∫–∞–∂–¥–æ–µ)</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <input type="file" id="entertainment-photo-0" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="entertainment-photo-1" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="entertainment-photo-2" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="entertainment-photo-3" accept="image/*" style="font-size: 12px;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">ü§ñ –ö–∞–ø—á–∞ *</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span id="entertainment-captcha-question" style="font-size: 18px; font-weight: bold; color: #333;">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            <input type="text" id="entertainment-captcha" required placeholder="–û—Ç–≤–µ—Ç" style="width: 100px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; text-align: center;">
                            <button type="button" onclick="loadEntertainmentCaptcha()" style="padding: 10px; background: #eee; border: none; border-radius: 6px; cursor: pointer;">üîÑ</button>
                        </div>
                        <input type="hidden" id="entertainment-captcha-answer">
                    </div>

                    <div id="entertainment-submit-status" style="margin-bottom: 15px; font-size: 14px; display: none;"></div>

                    <button type="submit" style="width: 100%; padding: 15px; background: #9C27B0; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 16px;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
                </form>
            </div>
        </div>

        <!-- –ë–∞—Ä–∞—Ö–æ–ª–∫–∞ -->
        <div id="marketplace" class="content">
            <div class="filters">
                <input type="text" placeholder="–ß—Ç–æ –∏—â–µ—Ç–µ?" onchange="loadListings('marketplace')">
            </div>
            <div class="listing-grid" id="marketplace-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –í–∏–∑–∞—Ä–∞–Ω -->
        <div id="visas" class="content">
            <div class="listing-grid" id="visas-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –ù–æ–≤–æ—Å—Ç–∏ -->
        <div id="news" class="content">
            <div class="listing-grid" id="news-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –ú–µ–¥–∏—Ü–∏–Ω–∞ -->
        <div id="medicine" class="content">
            <div class="filters">
                <input type="text" placeholder="–ü–æ–∏—Å–∫..." onchange="loadListings('medicine')">
            </div>
            <div class="listing-grid" id="medicine-grid">
                <div class="loading"><div class="spinner"></div></div>
            </div>
        </div>

        <!-- –ß–∞—Ç -->
        <div id="chat" class="content">
            <div style="max-width: 800px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid #dee2e6;">
                    <h3 style="margin: 0 0 5px 0; color: #333; font-size: 16px;">üí¨ –õ–µ–Ω—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                    <p style="margin: 0; color: #666; font-size: 12px;">–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–æ–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
                </div>
                <div id="chat-feed" style="max-height: 600px; overflow-y: auto;">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
            </div>
        </div>

        <!-- –î–ª—è –¥–µ—Ç–µ–π -->
        <div id="settings" class="content">
            <div style="max-width: 900px; margin: 0 auto; padding: 20px;">
                <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); border-radius: 12px; padding: 15px; margin-bottom: 20px; border: 1px solid #ffcc80;">
                    <h3 style="margin: 0 0 5px 0; color: #333; font-size: 16px;">üë∂ –î–ª—è –¥–µ—Ç–µ–π</h3>
                    <p style="margin: 0; color: #666; font-size: 12px;">–°–∞–¥–∏–∫–∏, —à–∫–æ–ª—ã, –Ω—è–Ω–∏, –∫—Ä—É–∂–∫–∏, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</p>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                    <div class="kids-category-btn" data-type="events" onclick="filterKidsCategory('events')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid #d4af37;">
                        <img src="/static/images/kids/events.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div style="font-weight: bold; font-size: 16px;">üéà –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</div>
                            <div style="font-size: 13px; margin-top: 4px; color: #666;">–ü—Ä–∞–∑–¥–Ω–∏–∫–∏, –∏–≥—Ä—ã, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</div>
                        </div>
                    </div>
                    <div class="kids-category-btn" data-type="nannies" onclick="filterKidsCategory('nannies')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/kids/nannies.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div style="font-weight: bold; font-size: 16px;">üë©‚Äçüëß –ù—è–Ω–∏ –∏ –∫—Ä—É–∂–∫–∏</div>
                            <div style="font-size: 13px; margin-top: 4px; color: #666;">–ù—è–Ω–∏, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã, —Å–µ–∫—Ü–∏–∏</div>
                        </div>
                    </div>
                    <div class="kids-category-btn" data-type="schools" onclick="filterKidsCategory('schools')" style="cursor: pointer; position: relative; border-radius: 12px; overflow: hidden; aspect-ratio: 4/3; box-shadow: 0 4px 12px rgba(0,0,0,0.15); border: 3px solid transparent;">
                        <img src="/static/images/kids/schools.jpg" style="width: 100%; height: 100%; object-fit: cover;">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.95); color: #333; padding: 12px; text-align: center;">
                            <div style="font-weight: bold; font-size: 16px;">üè´ –°–∞–¥–∏–∫–∏ –∏ —à–∫–æ–ª—ã</div>
                            <div style="font-size: 13px; margin-top: 4px; color: #666;">–î–µ—Ç—Å–∫–∏–µ —Å–∞–¥—ã, —à–∫–æ–ª—ã, –ª–∏—Ü–µ–∏</div>
                        </div>
                    </div>
                </div>
                
                <div id="kids-feed" style="max-height: 600px; overflow-y: auto;">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è -->
        <div id="move-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: white; border-radius: 12px; padding: 20px; max-width: 400px; width: 90%;">
                <h3 style="margin: 0 0 15px 0; color: #333;">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                <p style="margin: 0 0 10px 0; color: #666; font-size: 13px;" id="move-modal-id"></p>
                <label style="font-size: 12px; color: #666; font-weight: 600; display: block; margin-bottom: 5px;">–í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</label>
                <select id="move-modal-category" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; margin-bottom: 15px;">
                    <option value="restaurants">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                    <option value="tours">–≠–∫—Å–∫—É—Ä—Å–∏–∏</option>
                    <option value="transport">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                    <option value="real_estate">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</option>
                    <option value="money_exchange">–û–±–º–µ–Ω –¥–µ–Ω–µ–≥</option>
                    <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                    <option value="marketplace">–ë–∞—Ä–∞—Ö–æ–ª–∫–∞</option>
                    <option value="visas">–í–∏–∑–∞—Ä–∞–Ω</option>
                    <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                    <option value="medicine">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                    <option value="kids">–î–ª—è –¥–µ—Ç–µ–π</option>
                    <option value="chat">–ß–∞—Ç</option>
                </select>
                <div style="display: flex; gap: 10px;">
                    <button onclick="confirmMoveFromCard()" style="flex: 1; padding: 10px; background: #0088cc; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å</button>
                    <button onclick="document.getElementById('move-modal').style.display = 'none';" style="flex: 1; padding: 10px; background: #eee; color: #333; border: none; border-radius: 6px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è -->
        <div id="delete-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: white; border-radius: 12px; padding: 20px; max-width: 400px; width: 90%;">
                <h3 style="margin: 0 0 15px 0; color: #ff6b6b;">‚ö†Ô∏è –£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?</h3>
                <p style="margin: 0 0 15px 0; color: #666; font-size: 13px;" id="delete-modal-id"></p>
                <p style="margin: 0 0 15px 0; color: #999; font-size: 12px;">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!</p>
                <div style="display: flex; gap: 10px;">
                    <button onclick="confirmDeleteFromCard()" style="flex: 1; padding: 10px; background: #ff6b6b; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">–£–¥–∞–ª–∏—Ç—å</button>
                    <button onclick="document.getElementById('delete-modal').style.display = 'none';" style="flex: 1; padding: 10px; background: #eee; color: #333; border: none; border-radius: 6px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <div id="edit-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; overflow-y: auto;">
            <div style="background: white; border-radius: 12px; padding: 20px; max-width: 500px; width: 90%; margin: 20px auto;">
                <h3 style="margin: 0 0 15px 0; color: #4CAF50;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                <p style="margin: 0 0 15px 0; color: #666; font-size: 13px;" id="edit-modal-id"></p>
                
                <div style="margin-bottom: 12px;">
                    <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                    <input type="text" id="edit-title" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                </div>
                
                <div style="margin-bottom: 12px;">
                    <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea id="edit-description" rows="5" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; resize: vertical;"></textarea>
                </div>
                
                <div id="edit-realestate-fields">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 12px;">
                        <div>
                            <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">–¶–µ–Ω–∞:</label>
                            <input type="number" id="edit-price" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">–ö–æ–º–Ω–∞—Ç:</label>
                            <input type="text" id="edit-rooms" placeholder="1, 2, Studio" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">–ü–ª–æ—â–∞–¥—å (–º¬≤):</label>
                            <input type="number" id="edit-area" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üè∑Ô∏è –¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è:</label>
                        <div style="display: flex; gap: 15px;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="checkbox" id="edit-type-sale" value="sale"> –ü—Ä–æ–¥–∞–∂–∞
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="checkbox" id="edit-type-rent" value="rent"> –ê—Ä–µ–Ω–¥–∞
                            </label>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px;">
                    <div>
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üìÖ –î–∞—Ç–∞:</label>
                        <input type="date" id="edit-date" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ:</label>
                        <input type="text" id="edit-contact-name" placeholder="–ò–º—è" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px;">
                    <div>
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #25D366;">üí¨ WhatsApp:</label>
                        <input type="text" id="edit-whatsapp" placeholder="84797016179" style="width: 100%; padding: 10px; border: 1px solid #25D366; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #0088cc;">‚úàÔ∏è Telegram:</label>
                        <input type="text" id="edit-telegram" placeholder="@username" style="width: 100%; padding: 10px; border: 1px solid #0088cc; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                </div>
                
                <div id="edit-restaurant-fields" style="display: none;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 12px;">
                        <div>
                            <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üèôÔ∏è –ì–æ—Ä–æ–¥:</label>
                            <select id="edit-city" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                                <option value="">–ù–µ —É–∫–∞–∑–∞–Ω</option>
                                <option value="Nha Trang">–ù—è—á–∞–Ω–≥</option>
                                <option value="Ho Chi Minh">–•–æ—à–∏–º–∏–Ω</option>
                                <option value="Da Nang">–î–∞–Ω–∞–Ω–≥</option>
                                <option value="Hanoi">–•–∞–Ω–æ–π</option>
                                <option value="Phu Quoc">–§—É–∫—É–æ–∫</option>
                                <option value="Phan Thiet">–§–∞–Ω—Ç—å–µ—Ç</option>
                                <option value="Cam Ranh">–ö–∞–º—Ä–∞–Ω—å</option>
                                <option value="Da Lat">–î–∞–ª–∞—Ç</option>
                                <option value="Hoi An">–•–æ–π–∞–Ω</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üç≥ –ö—É—Ö–Ω—è:</label>
                            <input type="text" id="edit-kitchen" placeholder="–í—å–µ—Ç–Ω–∞–º—Å–∫–∞—è, –ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è..." style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üè∑Ô∏è –¢–∏–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è:</label>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; padding: 8px 12px; border: 2px solid #FF5722; border-radius: 6px;">
                                <input type="radio" name="edit-restaurant-type" value="—Ä–µ—Å—Ç–æ—Ä–∞–Ω"> üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; padding: 8px 12px; border: 2px solid #795548; border-radius: 6px;">
                                <input type="radio" name="edit-restaurant-type" value="–∫–∞—Ñ–µ"> ‚òï –ö–∞—Ñ–µ
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; padding: 8px 12px; border: 2px solid #9C27B0; border-radius: 6px;">
                                <input type="radio" name="edit-restaurant-type" value="–±–∞—Ä"> üç∏ –ë–∞—Ä
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer; padding: 8px 12px; border: 2px solid #00BCD4; border-radius: 6px;">
                                <input type="radio" name="edit-restaurant-type" value="–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã"> ü¶ê –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã
                            </label>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #333;">üí∞ –¶–µ–Ω–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <div style="display: flex; gap: 15px;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="edit-price-category" value="cheap"> üíµ –î—ë—à–µ–≤–æ
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="edit-price-category" value="normal"> üíµüíµ –ù–æ—Ä–º–∞–ª—å–Ω–æ
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="edit-price-category" value="expensive"> üíµüíµüíµ –î–æ—Ä–æ–≥–æ
                            </label>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #4285F4;">üó∫Ô∏è Google Maps:</label>
                        <input type="url" id="edit-google-maps" placeholder="https://maps.google.com/..." style="width: 100%; padding: 10px; border: 1px solid #4285F4; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: block; margin-bottom: 4px; font-weight: 600; font-size: 13px; color: #FFC107;">‚≠ê –†–µ–π—Ç–∏–Ω–≥ Google:</label>
                        <input type="text" id="edit-google-rating" placeholder="4.5" style="width: 100%; padding: 10px; border: 1px solid #FFC107; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                </div>
                
                <div id="edit-status" style="margin-bottom: 12px; font-size: 13px; display: none;"></div>
                
                <div style="display: flex; gap: 10px;">
                    <button onclick="saveEditFromCard()" style="flex: 1; padding: 10px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button onclick="document.getElementById('edit-modal').style.display = 'none';" style="flex: 1; padding: 10px; background: #eee; color: #333; border: none; border-radius: 6px; cursor: pointer;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
        <div id="submit-listing" class="content">
            <div style="max-width: 600px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 22px;">üìù –ü–æ–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h2>
                    <p style="margin: 0; opacity: 0.9;">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—ë –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ —Ä–∞–∑–¥–µ–ª –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å. –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.</p>
                </div>

                <form id="submit-form" style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                        <input type="text" id="submit-title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–≤–∞—Ä—Ç–∏—Ä–∞ 2 –∫–æ–º–Ω–∞—Ç—ã –≤ —Ü–µ–Ω—Ç—Ä–µ" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea id="submit-description" required rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; resize: vertical;"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–¶–µ–Ω–∞</label>
                            <input type="number" id="submit-price" placeholder="0" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ö–æ–º–Ω–∞—Ç</label>
                            <input type="text" id="submit-rooms" placeholder="1, 2, Studio" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ü–ª–æ—â–∞–¥—å –º¬≤</label>
                            <input type="number" id="submit-area" placeholder="50" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                            <input type="text" id="submit-location" placeholder="–¶–µ–Ω—Ç—Ä, —É –º–æ—Ä—è..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üèôÔ∏è –ì–æ—Ä–æ–¥</label>
                            <select id="submit-city" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                                <option value="Nha Trang">–ù—è—á–∞–Ω–≥</option>
                                <option value="Ho Chi Minh">–•–æ—à–∏–º–∏–Ω</option>
                                <option value="Da Nang">–î–∞–Ω–∞–Ω–≥</option>
                                <option value="Hanoi">–•–∞–Ω–æ–π</option>
                                <option value="Phu Quoc">–§—É–∫—É–æ–∫</option>
                                <option value="Phan Thiet">–§–∞–Ω—Ç—å–µ—Ç</option>
                                <option value="Cam Ranh">–ö–∞–º—Ä–∞–Ω—å</option>
                                <option value="Da Lat">–î–∞–ª–∞—Ç</option>
                            </select>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                        <input type="text" id="submit-contact-name" placeholder="–í–∞—à–µ –∏–º—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #25D366;">üí¨ WhatsApp *</label>
                            <input type="text" id="submit-whatsapp" required placeholder="84797016179" style="width: 100%; padding: 12px; border: 1px solid #25D366; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #0088cc;">‚úàÔ∏è Telegram</label>
                            <input type="text" id="submit-telegram" placeholder="@username" style="width: 100%; padding: 12px; border: 1px solid #0088cc; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è</label>
                        <div style="display: flex; gap: 20px;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="checkbox" id="submit-type-sale" value="sale"> –ü—Ä–æ–¥–∞–∂–∞
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="checkbox" id="submit-type-rent" value="rent"> –ê—Ä–µ–Ω–¥–∞
                            </label>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üì∑ –§–æ—Ç–æ (–¥–æ 4 —à—Ç, –º–∞–∫—Å 1 –ú–ë –∫–∞–∂–¥–æ–µ)</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <input type="file" id="submit-photo-0" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="submit-photo-1" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="submit-photo-2" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="submit-photo-3" accept="image/*" style="font-size: 12px;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">ü§ñ –ö–∞–ø—á–∞ *</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span id="captcha-question" style="font-size: 18px; font-weight: bold; color: #333;">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            <input type="text" id="submit-captcha" required placeholder="–û—Ç–≤–µ—Ç" style="width: 100px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; text-align: center;">
                            <button type="button" onclick="loadCaptcha()" style="padding: 10px; background: #eee; border: none; border-radius: 6px; cursor: pointer;">üîÑ</button>
                        </div>
                        <input type="hidden" id="captcha-answer">
                    </div>

                    <div id="submit-status" style="margin-bottom: 15px; font-size: 14px; display: none;"></div>

                    <button type="submit" style="width: 100%; padding: 15px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 16px;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
                </form>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ -->
        <div id="submit-restaurant" class="content">
            <div style="max-width: 600px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 22px;">üçΩÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω</h2>
                    <p style="margin: 0; opacity: 0.9;">–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—ë –∑–∞–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–∞–∑–¥–µ–ª –†–µ—Å—Ç–æ—Ä–∞–Ω—ã. –ü–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –æ–Ω–æ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ.</p>
                </div>

                <form id="submit-restaurant-form" style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd;">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                        <input type="text" id="restaurant-title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞—Ñ–µ –í—å–µ—Ç–Ω–∞–º—Å–∫–∞—è –∫—É—Ö–Ω—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üè∑Ô∏è –¢–∏–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è *</label>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 10px 15px; border: 2px solid #FF5722; border-radius: 8px; background: #fff;">
                                <input type="radio" name="restaurant-type" value="—Ä–µ—Å—Ç–æ—Ä–∞–Ω" checked> üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 10px 15px; border: 2px solid #795548; border-radius: 8px; background: #fff;">
                                <input type="radio" name="restaurant-type" value="–∫–∞—Ñ–µ"> ‚òï –ö–∞—Ñ–µ
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 10px 15px; border: 2px solid #9C27B0; border-radius: 8px; background: #fff;">
                                <input type="radio" name="restaurant-type" value="–±–∞—Ä"> üç∏ –ë–∞—Ä
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 10px 15px; border: 2px solid #00BCD4; border-radius: 8px; background: #fff;">
                                <input type="radio" name="restaurant-type" value="–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã"> ü¶ê –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã
                            </label>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                        <textarea id="restaurant-description" required rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è, –º–µ–Ω—é, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box; resize: vertical;"></textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üç≥ –ö—É—Ö–Ω—è</label>
                            <input type="text" id="restaurant-kitchen" placeholder="–í—å–µ—Ç–Ω–∞–º—Å–∫–∞—è, –ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</label>
                            <input type="text" id="restaurant-location" placeholder="–¶–µ–Ω—Ç—Ä, –ø–ª—è–∂, —Ä–∞–π–æ–Ω..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üèôÔ∏è –ì–æ—Ä–æ–¥</label>
                        <select id="restaurant-city" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                            <option value="Nha Trang">–ù—è—á–∞–Ω–≥</option>
                            <option value="Ho Chi Minh">–•–æ—à–∏–º–∏–Ω</option>
                            <option value="Da Nang">–î–∞–Ω–∞–Ω–≥</option>
                            <option value="Hanoi">–•–∞–Ω–æ–π</option>
                            <option value="Phu Quoc">–§—É–∫—É–æ–∫</option>
                            <option value="Phan Thiet">–§–∞–Ω—Ç—å–µ—Ç</option>
                            <option value="Cam Ranh">–ö–∞–º—Ä–∞–Ω—å</option>
                            <option value="Da Lat">–î–∞–ª–∞—Ç</option>
                            <option value="Hoi An">–•–æ–π–∞–Ω</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4285F4;">üó∫Ô∏è –°—Å—ã–ª–∫–∞ –Ω–∞ Google Maps</label>
                        <input type="url" id="restaurant-google-maps" placeholder="https://maps.google.com/..." style="width: 100%; padding: 12px; border: 1px solid #4285F4; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">–û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ –≤ Google Maps ‚Üí –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</p>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
                        <input type="text" id="restaurant-contact-name" placeholder="–í–∞—à–µ –∏–º—è" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #25D366;">üí¨ WhatsApp *</label>
                            <input type="text" id="restaurant-whatsapp" required placeholder="84797016179" style="width: 100%; padding: 12px; border: 1px solid #25D366; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #0088cc;">‚úàÔ∏è Telegram</label>
                            <input type="text" id="restaurant-telegram" placeholder="@username" style="width: 100%; padding: 12px; border: 1px solid #0088cc; border-radius: 6px; font-size: 14px; box-sizing: border-box;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üí∞ –¶–µ–Ω–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <div style="display: flex; gap: 20px;">
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="restaurant-price-category" value="cheap"> üíµ –î—ë—à–µ–≤–æ
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="restaurant-price-category" value="normal" checked> üíµüíµ –ù–æ—Ä–º–∞–ª—å–Ω–æ
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                                <input type="radio" name="restaurant-price-category" value="expensive"> üíµüíµüíµ –î–æ—Ä–æ–≥–æ
                            </label>
                        </div>
                    </div>

                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">üì∑ –§–æ—Ç–æ (–¥–æ 4 —à—Ç, –º–∞–∫—Å 1 –ú–ë –∫–∞–∂–¥–æ–µ)</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <input type="file" id="restaurant-photo-0" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="restaurant-photo-1" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="restaurant-photo-2" accept="image/*" style="font-size: 12px;">
                            <input type="file" id="restaurant-photo-3" accept="image/*" style="font-size: 12px;">
                        </div>
                    </div>

                    <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">ü§ñ –ö–∞–ø—á–∞ *</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span id="restaurant-captcha-question" style="font-size: 18px; font-weight: bold; color: #333;">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                            <input type="text" id="restaurant-captcha" required placeholder="–û—Ç–≤–µ—Ç" style="width: 100px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; text-align: center;">
                            <button type="button" onclick="loadRestaurantCaptcha()" style="padding: 10px; background: #eee; border: none; border-radius: 6px; cursor: pointer;">üîÑ</button>
                        </div>
                        <input type="hidden" id="restaurant-captcha-answer">
                    </div>

                    <div id="restaurant-submit-status" style="margin-bottom: 15px; font-size: 14px; display: none;"></div>

                    <button type="submit" style="width: 100%; padding: 15px; background: #FF6B35; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 16px;">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</button>
                </form>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å -->
        <div id="admin" class="content">
            <div style="max-width: 900px; margin: 0 auto;">
                <div style="background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <h2 style="margin: 0 0 10px 0; font-size: 22px;">‚öôÔ∏è –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h2>
                    <p style="margin: 0; opacity: 0.9;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏: —É–¥–∞–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è</p>
                </div>

                <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #ddd;">
                    <h3 style="margin: 0 0 15px 0; color: #333;">üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <input type="password" id="admin-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px;">
                        <button onclick="adminAuth()" style="padding: 10px 20px; background: #0088cc; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">–í–æ–π—Ç–∏</button>
                    </div>
                    <div id="admin-status" style="font-size: 13px; color: #666;"></div>
                </div>

                <div id="admin-tools" style="display: none;">
                    <!-- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                    <div style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd; margin-bottom: 20px;">
                        <h3 style="margin: 0 0 15px 0; color: #333;">üìã –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h3>
                        <button onclick="loadPendingListings()" style="padding: 10px 20px; background: #0088cc; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; margin-bottom: 15px;">üîÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–∂–∏–¥–∞—é—â–∏–µ</button>
                        <div id="pending-count" style="font-size: 14px; color: #666; margin-bottom: 10px;"></div>
                        <div id="pending-list" style="display: grid; gap: 15px;"></div>
                    </div>

                    <div style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd;">
                        <h3 style="margin: 0 0 15px 0; color: #333;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 10px; margin-bottom: 15px; align-items: end;">
                            <div>
                                <label style="font-size: 12px; color: #666; font-weight: 600;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select id="delete-category" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                                    <option value="restaurants">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                                    <option value="tours">–≠–∫—Å–∫—É—Ä—Å–∏–∏</option>
                                    <option value="transport">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                    <option value="real_estate">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</option>
                                    <option value="money_exchange">–û–±–º–µ–Ω –¥–µ–Ω–µ–≥</option>
                                    <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                    <option value="marketplace">–ë–∞—Ä–∞—Ö–æ–ª–∫–∞</option>
                                    <option value="visas">–í–∏–∑–∞—Ä–∞–Ω</option>
                                    <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                                    <option value="medicine">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                                    <option value="kids">–î–ª—è –¥–µ—Ç–µ–π</option>
                                    <option value="chat">–ß–∞—Ç</option>
                                </select>
                            </div>
                            <div>
                                <label style="font-size: 12px; color: #666; font-weight: 600;">ID –û–±—ä—è–≤–ª–µ–Ω–∏—è</label>
                                <input type="text" id="delete-id" placeholder="vietnam_food_123" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                            </div>
                            <button onclick="deleteListingAdmin()" style="padding: 10px 20px; background: #ff6b6b; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; height: 40px;">–£–¥–∞–ª–∏—Ç—å</button>
                            <div style="font-size: 12px; color: #666; text-align: center;" id="delete-result"></div>
                        </div>
                    </div>

                    <div style="background: white; border-radius: 12px; padding: 20px; border: 1px solid #ddd; margin-top: 20px;">
                        <h3 style="margin: 0 0 15px 0; color: #333;">‚ÜîÔ∏è –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr auto; gap: 10px; margin-bottom: 15px; align-items: end;">
                            <div>
                                <label style="font-size: 12px; color: #666; font-weight: 600;">ID –û–±—ä—è–≤–ª–µ–Ω–∏—è</label>
                                <input type="text" id="move-id" placeholder="vietnam_food_123" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                            </div>
                            <div>
                                <label style="font-size: 12px; color: #666; font-weight: 600;">–û—Ç–∫—É–¥–∞</label>
                                <select id="move-from" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                                    <option value="restaurants">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                                    <option value="tours">–≠–∫—Å–∫—É—Ä—Å–∏–∏</option>
                                    <option value="transport">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                    <option value="real_estate">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</option>
                                    <option value="money_exchange">–û–±–º–µ–Ω –¥–µ–Ω–µ–≥</option>
                                    <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                    <option value="marketplace">–ë–∞—Ä–∞—Ö–æ–ª–∫–∞</option>
                                    <option value="visas">–í–∏–∑–∞—Ä–∞–Ω</option>
                                    <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                                    <option value="medicine">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                                    <option value="kids">–î–ª—è –¥–µ—Ç–µ–π</option>
                                    <option value="chat">–ß–∞—Ç</option>
                                </select>
                            </div>
                            <div>
                                <label style="font-size: 12px; color: #666; font-weight: 600;">–ö—É–¥–∞</label>
                                <select id="move-to" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px;">
                                    <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                    <option value="restaurants">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                                    <option value="tours">–≠–∫—Å–∫—É—Ä—Å–∏–∏</option>
                                    <option value="transport">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                    <option value="real_estate">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</option>
                                    <option value="money_exchange">–û–±–º–µ–Ω –¥–µ–Ω–µ–≥</option>
                                    <option value="marketplace">–ë–∞—Ä–∞—Ö–æ–ª–∫–∞</option>
                                    <option value="visas">–í–∏–∑–∞—Ä–∞–Ω</option>
                                    <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                                    <option value="medicine">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                                    <option value="kids">–î–ª—è –¥–µ—Ç–µ–π</option>
                                    <option value="chat">–ß–∞—Ç</option>
                                </select>
                            </div>
                            <button onclick="moveListingAdmin()" style="padding: 10px 20px; background: #0088cc; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; height: 40px;">–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å</button>
                        </div>
                        <div style="font-size: 12px; color: #666;" id="move-result"></div>
                    </div>

                    <div style="background: #fafafa; padding: 20px; border-radius: 8px; border: 1px solid #eee; margin-top: 20px;">
                        <h4 style="margin: 0 0 15px 0; color: #333;">üñºÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞–º–∏ (${currentCountry})</h4>
                        <div id="admin-banners-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-bottom: 15px;">
                            <!-- –ë–∞–Ω–Ω–µ—Ä—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </div>
                        <div style="display: flex; gap: 10px; align-items: flex-end;">
                            <div style="flex: 1;">
                                <label style="font-size: 12px; color: #666; font-weight: 600;">–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π –±–∞–Ω–Ω–µ—Ä</label>
                                <input type="file" id="banner-upload-input" accept="image/*" style="width: 100%; padding: 8px; background: white; border: 1px solid #ddd; border-radius: 6px; margin-top: 5px;">
                            </div>
                            <button onclick="uploadBannerAdmin()" style="padding: 10px 20px; background: #31a24c; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; height: 40px;">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                        </div>
                        <div id="banner-upload-status" style="font-size: 12px; margin-top: 8px;"></div>
                    </div>

                    <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; border: 1px solid #90caf9; margin-top: 20px;">
                        <h4 style="margin: 0 0 15px 0; color: #1565c0;">üì° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Telegram –∫–∞–Ω–∞–ª–∞–º–∏</h4>
                        <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                            <select id="channel-category" style="padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; min-width: 150px;">
                                <option value="chat">–ß–∞—Ç</option>
                                <option value="restaurants">–†–µ—Å—Ç–æ—Ä–∞–Ω—ã</option>
                                <option value="tours">–≠–∫—Å–∫—É—Ä—Å–∏–∏</option>
                                <option value="transport">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                <option value="real_estate">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</option>
                                <option value="money_exchange">–û–±–º–µ–Ω –¥–µ–Ω–µ–≥</option>
                                <option value="entertainment">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                <option value="marketplace">–ë–∞—Ä–∞—Ö–æ–ª–∫–∞</option>
                                <option value="visas">–í–∏–∑–∞—Ä–∞–Ω</option>
                                <option value="news">–ù–æ–≤–æ—Å—Ç–∏</option>
                                <option value="medicine">–ú–µ–¥–∏—Ü–∏–Ω–∞</option>
                                <option value="kids">–î–ª—è –¥–µ—Ç–µ–π</option>
                            </select>
                            <input type="text" id="new-channel-name" placeholder="@channel_name" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-size: 13px; min-width: 200px;">
                            <button onclick="addChannelAdmin()" style="padding: 10px 20px; background: #1565c0; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                        <div id="channel-result" style="font-size: 12px; margin-bottom: 10px;"></div>
                        <div id="channels-list" style="max-height: 400px; overflow-y: auto; background: white; border-radius: 6px; border: 1px solid #ddd;">
                            <!-- –ö–∞–Ω–∞–ª—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentCountry = 'vietnam';
        
        const countryConfig = {
            'vietnam': { pair: 'USDT/VND', rubPair: 'VND/RUB', currency: 'VND' },
            'thailand': { pair: 'USDT/THB', rubPair: 'THB/RUB', currency: 'THB' },
            'india': { pair: 'USDT/INR', rubPair: 'INR/RUB', currency: 'INR' },
            'indonesia': { pair: 'USDT/IDR', rubPair: 'IDR/RUB', currency: 'IDR' }
        };

        let bannerConfig = {};

        async function loadBanners() {
            try {
                console.log('Loading banners...');
                const r = await fetch('/api/banners');
                bannerConfig = await r.json();
                console.log('Banner config loaded:', bannerConfig);
                
                // Preload all banners to ensure they are in cache
                for (const country in bannerConfig) {
                    if (bannerConfig[country]) {
                        bannerConfig[country].forEach(src => {
                            const img = new Image();
                            img.src = src;
                        });
                    }
                }
                
                updateBanner();
                if (adminAuthenticated) renderAdminBanners();
            } catch (e) {
                console.error('Error loading banners:', e);
            }
        }

        function updateBanner() {
            const banners = bannerConfig[currentCountry] || [];
            const banner = document.getElementById('banner');
            if (!banner) {
                console.error('Banner element not found');
                return;
            }
            
            const navs = banner.querySelectorAll('.banner-nav');
            
            if (banners.length > 0) {
                if (countryConfig[currentCountry].currentBanner === undefined) countryConfig[currentCountry].currentBanner = 0;
                let currentIdx = countryConfig[currentCountry].currentBanner;
                
                if (currentIdx >= banners.length) {
                    currentIdx = 0;
                    countryConfig[currentCountry].currentBanner = 0;
                }

                navs.forEach(nav => nav.style.display = banners.length > 1 ? 'flex' : 'none');

                const imgUrl = banners[currentIdx];
                console.log('Applying banner:', imgUrl);
                
                // Simply set background image
                banner.style.backgroundImage = `url('${imgUrl}')`;
                banner.style.display = 'block';
                
                banner.onclick = (e) => {
                    if (!e.target.classList.contains('banner-nav')) {
                        changeBanner(1);
                    }
                };
            } else {
                banner.style.display = 'none';
            }
        }

        function changeBanner(direction) {
            const banners = bannerConfig[currentCountry] || [];
            if (banners.length <= 1) return;
            
            let currentIdx = countryConfig[currentCountry].currentBanner || 0;
            currentIdx = (currentIdx + direction + banners.length) % banners.length;
            countryConfig[currentCountry].currentBanner = currentIdx;
            updateBanner();
        }

        setInterval(() => {
            const banners = bannerConfig[currentCountry] || [];
            if (banners.length > 1) {
                const currentIdx = countryConfig[currentCountry].currentBanner || 0;
                const nextIdx = (currentIdx + 1) % banners.length;
                countryConfig[currentCountry].currentBanner = nextIdx;
                updateBanner();
            }
        }, 10000);

        function switchCountry(country) {
            currentCountry = country;
            document.querySelectorAll('.country-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('onclick').includes(country));
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è –í—å–µ—Ç–Ω–∞–º–∞
            if (document.getElementById('vietnam-entertainment-buttons'))
                document.getElementById('vietnam-entertainment-buttons').style.display = (country === 'vietnam') ? 'block' : 'none';
            if (document.getElementById('vietnam-realestate-buttons'))
                document.getElementById('vietnam-realestate-buttons').style.display = (country === 'vietnam') ? 'block' : 'none';
            if (document.getElementById('vietnam-tours-buttons'))
                document.getElementById('vietnam-tours-buttons').style.display = (country === 'vietnam') ? 'block' : 'none';
            if (document.getElementById('vietnam-transport-buttons'))
                document.getElementById('vietnam-transport-buttons').style.display = (country === 'vietnam') ? 'block' : 'none';
            if (document.getElementById('vietnam-restaurants-buttons'))
                document.getElementById('vietnam-restaurants-buttons').style.display = (country === 'vietnam') ? 'block' : 'none';

            if (countryConfig[country] && countryConfig[country].pair) {
                document.getElementById('local-pair').textContent = countryConfig[country].pair;
                document.getElementById('rub-pair').textContent = countryConfig[country].rubPair;
            }
            
            if (!countryConfig[country].currentBanner) countryConfig[country].currentBanner = 0;
            updateBanner();
            if (adminAuthenticated) renderAdminBanners();
            
            updateRates();
            loadStats();
            if (document.getElementById('chat').classList.contains('active')) loadChatFeed();
            loadListings('restaurants');
        }
        
        function updateRates() {
            // BTC/USD from CoinGecko
            fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd')
                .then(r => r.json())
                .then(data => {
                    const btcRate = data.bitcoin?.usd;
                    if (btcRate) {
                        document.getElementById('btc-rate').textContent = '$' + btcRate.toLocaleString('en-US', { maximumFractionDigits: 0 });
                    }
                })
                .catch(err => console.log('BTC rate error:', err));
            
            // Local currency rate (mock data for demo)
            const localRates = {
                'vietnam': '24,500',
                'thailand': '33.5',
                'india': '83.2',
                'indonesia': '15,500'
            };
            document.getElementById('local-rate').textContent = localRates[currentCountry];
            
            // RUB rates (1 RUB = X local currency)
            const rubRates = {
                'vietnam': '245',
                'thailand': '0.34',
                'india': '0.84',
                'indonesia': '155'
            };
            document.getElementById('rub-rate').textContent = rubRates[currentCountry];
        }

        function switchTab(tabName) {
            document.querySelectorAll('.content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            
            let contentEl = document.getElementById(tabName);
            if (contentEl) contentEl.classList.add('active');
            
            let tabBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (tabBtn) tabBtn.classList.add('active');
            
            if (tabName === 'stats') {
                loadStats();
            } else if (tabName === 'chat') {
                loadChatFeed();
            } else if (tabName === 'settings') {
                loadKidsFeed();
            } else if (tabName === 'realestate') {
                loadRealEstateCounts();
                loadListings('real_estate');
            } else {
                let category = tabName === 'realestate' ? 'real_estate' : tabName;
                console.log('Loading category:', category);
                loadListings(category);
            }
        }
        
        function loadChatFeed() {
            const feed = document.getElementById('chat-feed');
            if (!feed) return;
            
            feed.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            fetch(`/api/listings/chat?country=${currentCountry}`)
                .then(r => r.json())
                .then(messages => {
                    if (!messages || messages.length === 0) {
                        feed.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</div>';
                        return;
                    }
                    
                    // Sort by date descending
                    messages.sort((a, b) => new Date(b.date) - new Date(a.date));
                    
                    feed.innerHTML = messages.map(msg => {
                        const date = new Date(msg.date);
                        const timeStr = date.toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit' });
                        const channel = msg.source_channel || '';
                        const text = msg.description || msg.title || '';
                        const hasImage = msg.image_url;
                        const telegramLink = msg.telegram_link || (channel && msg.message_id ? `https://t.me/${channel.replace('@', '')}/${msg.message_id}` : '');
                        
                        return `
                            <div style="background: white; border-radius: 10px; padding: 15px; margin-bottom: 12px; border: 1px solid #e0e0e0; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <span style="font-weight: 600; color: #0088cc; font-size: 13px;">${channel}</span>
                                    <span style="color: #999; font-size: 11px;">${timeStr}</span>
                                </div>
                                ${hasImage ? `<img src="${msg.image_url}" style="width: 100%; max-height: 300px; object-fit: cover; border-radius: 8px; margin-bottom: 10px;" onerror="this.style.display='none'">` : ''}
                                <div style="color: #333; font-size: 14px; line-height: 1.5; white-space: pre-wrap;">${text.substring(0, 500)}${text.length > 500 ? '...' : ''}</div>
                                ${telegramLink ? `<a href="${telegramLink}" target="_blank" style="display: inline-block; margin-top: 10px; color: #0088cc; font-size: 12px; text-decoration: none;">‚úàÔ∏è –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram</a>` : ''}
                            </div>
                        `;
                    }).join('');
                })
                .catch(err => {
                    feed.innerHTML = '<div style="text-align: center; padding: 40px; color: #f44;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                });
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
            if (!window.chatRefreshInterval) {
                window.chatRefreshInterval = setInterval(() => {
                    if (document.getElementById('chat').classList.contains('active')) {
                        loadChatFeed();
                    }
                }, 60000);
            }
        }

        function loadKidsFeed() {
            const feed = document.getElementById('kids-feed');
            if (!feed) return;
            
            feed.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            fetch(`/api/listings/entertainment?country=${currentCountry}`)
                .then(r => r.json())
                .then(messages => {
                    if (!messages || messages.length === 0) {
                        feed.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">–ù–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π –¥–ª—è –¥–µ—Ç–µ–π</div>';
                        return;
                    }
                    
                    messages.sort((a, b) => new Date(b.date) - new Date(a.date));
                    
                    feed.innerHTML = messages.map(msg => {
                        const date = new Date(msg.date);
                        const timeStr = date.toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit' });
                        const channel = msg.source_channel || '';
                        const text = msg.description || msg.title || '';
                        const hasImage = msg.image_url;
                        const telegramLink = msg.telegram_link || (channel && msg.message_id ? `https://t.me/${channel.replace('@', '')}/${msg.message_id}` : '');
                        
                        return `
                            <div style="background: white; border-radius: 10px; padding: 15px; margin-bottom: 12px; border: 1px solid #ffcc80; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <span style="font-weight: 600; color: #ff9800; font-size: 13px;">${channel}</span>
                                    <span style="color: #999; font-size: 11px;">${timeStr}</span>
                                </div>
                                ${hasImage ? `<img src="${msg.image_url}" style="width: 100%; max-height: 300px; object-fit: cover; border-radius: 8px; margin-bottom: 10px;" onerror="this.style.display='none'">` : ''}
                                <div style="color: #333; font-size: 14px; line-height: 1.5; white-space: pre-wrap;">${text.substring(0, 500)}${text.length > 500 ? '...' : ''}</div>
                                ${telegramLink ? `<a href="${telegramLink}" target="_blank" style="display: inline-block; margin-top: 10px; color: #ff9800; font-size: 12px; text-decoration: none;">‚úàÔ∏è –û—Ç–∫—Ä—ã—Ç—å –≤ Telegram</a>` : ''}
                            </div>
                        `;
                    }).join('');
                })
                .catch(err => {
                    feed.innerHTML = '<div style="text-align: center; padding: 40px; color: #f44;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                });
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;
            
            const messagesDiv = document.getElementById('chat-messages');
            const msgEl = document.createElement('div');
            msgEl.style.cssText = 'background: white; padding: 12px; border-radius: 6px; margin-bottom: 10px; border-left: 3px solid #d4af37;';
            msgEl.innerHTML = `<div style="font-weight: 600; color: #333; font-size: 13px;">–í—ã</div><div style="color: #666; font-size: 12px; margin-top: 4px;">${message}</div><div style="color: #999; font-size: 11px; margin-top: 4px;">${new Date().toLocaleTimeString('ru-RU')}</div>`;
            
            messagesDiv.appendChild(msgEl);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            input.value = '';
        }

        // Allow Enter key to send message
        document.addEventListener('DOMContentLoaded', function() {
            const chatInput = document.getElementById('chat-input');
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
        });

        function loadStats() {
            fetch(`/api/status?country=${currentCountry}`)
                .then(r => r.json())
                .then(data => {
                    let html = '';
                    const categoryNames = {
                        restaurants: 'üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω—ã', tours: 'üß≥ –≠–∫—Å–∫—É—Ä—Å–∏–∏', transport: 'üèçÔ∏è –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç',
                        real_estate: 'üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å', money_exchange: 'üí± –û–±–º–µ–Ω', entertainment: 'üë∂ –î–ª—è –¥–µ—Ç–µ–π',
                        marketplace: 'üõçÔ∏è –ë–∞—Ä–∞—Ö–æ–ª–∫–∞', visas: 'üèñÔ∏è –í–∏–∑–∞—Ä–∞–Ω', news: 'üì∞ –ù–æ–≤–æ—Å—Ç–∏', chat: 'üí¨ –ß–∞—Ç',
                        medicine: 'üè• –ú–µ–¥–∏—Ü–∏–Ω–∞'
                    };
                    for (let [cat, count] of Object.entries(data.categories)) {
                        let label = categoryNames[cat] || `üì¶ ${cat}`;
                        html += `<div class="stat-box"><div class="number">${count}</div><div class="label">${label}</div></div>`;
                    }
                    document.getElementById('stats-grid').innerHTML = html;
                    document.getElementById('total-items').innerText = data.total_listings;
                    document.getElementById('parser-status').innerText = data.parser_status === 'connected' ? '–ü–æ–¥–∫–ª—é—á–µ–Ω' : '–û—Ç–∫–ª—é—á–µ–Ω';
                    document.getElementById('last-update').innerText = new Date(data.last_update).toLocaleTimeString('ru-RU');
                });
            
            loadGroupsStats();
        }
        
        // –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π API –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è tabs
        function getCategoryTabName(cat) {
            const mapping = {
                'real_estate': 'realestate',
                'transport': 'transport',
                'money_exchange': 'exchange',
                'chat': 'chat',
                'restaurants': 'restaurants',
                'tours': 'tours',
                'entertainment': 'entertainment',
                'marketplace': 'marketplace',
                'visas': 'visas',
                'news': 'news',
                'medicine': 'medicine'
            };
            return mapping[cat] || cat;
        }
        
        function loadGroupsStats() {
            fetch(`/api/groups-stats?country=${currentCountry}`)
                .then(r => r.json())
                .then(data => {
                    const tbody = document.getElementById('groups-tbody');
                    const tfoot = document.getElementById('groups-tfoot');
                    const updatedEl = document.getElementById('stats-updated');
                    
                    if (data.updated) {
                        const date = new Date(data.updated);
                        updatedEl.textContent = '–û–±–Ω–æ–≤–ª–µ–Ω–æ: ' + date.toLocaleString('ru-RU', { day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit' });
                    }
                    
                    if (!data.categories || Object.keys(data.categories).length === 0) {
                        tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #888;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ü–∏–∫–ª–∞ –ø–∞—Ä—Å–µ—Ä–∞.</td></tr>';
                        return;
                    }
                    
                    let rows = '';
                    let totalGroups = 0, totalParticipants = 0, totalOnline = 0, totalListings = 0;
                    
                    const sortedCats = Object.entries(data.categories).sort((a, b) => b[1].participants - a[1].participants);
                    
                    for (const [cat, stats] of sortedCats) {
                        totalGroups += stats.groups;
                        totalParticipants += stats.participants;
                        totalOnline += stats.online;
                        totalListings += stats.listings;
                        
                        const tabName = getCategoryTabName(cat);
                        rows += `
                            <tr style="border-bottom: 1px solid #eee;">
                                <td style="padding: 10px;"><span class="category-link" onclick="switchTab('${tabName}'); loadListings('${cat === 'transport' ? 'transport' : cat === 'real_estate' ? 'real_estate' : cat === 'money_exchange' ? 'money_exchange' : cat}')">${cat}</span></td>
                                <td style="padding: 10px; text-align: center;">${stats.groups}</td>
                                <td style="padding: 10px; text-align: center; color: #2196F3;">${stats.participants.toLocaleString()}</td>
                                <td style="padding: 10px; text-align: center; color: #4CAF50;">${stats.online.toLocaleString()}</td>
                                <td style="padding: 10px; text-align: center; color: #d4af37;">${stats.listings}</td>
                            </tr>
                        `;
                    }
                    
                    tbody.innerHTML = rows;
                    tfoot.innerHTML = `
                        <tr>
                            <td style="padding: 10px; border-radius: 0 0 0 8px;">–ò–¢–û–ì–û</td>
                            <td style="padding: 10px; text-align: center;">${totalGroups}</td>
                            <td style="padding: 10px; text-align: center; color: #2196F3;">${totalParticipants.toLocaleString()}</td>
                            <td style="padding: 10px; text-align: center; color: #4CAF50;">${totalOnline.toLocaleString()}</td>
                            <td style="padding: 10px; text-align: center; color: #d4af37; border-radius: 0 0 8px 0;">${totalListings}</td>
                        </tr>
                    `;
                })
                .catch(err => {
                    console.error('Groups stats error:', err);
                });
        }

        function isEnglishOnly(text) {
            if (!text) return false;
            for (let i = 0; i < text.length; i++) {
                const code = text.charCodeAt(i);
                if (code > 127 && '.,!?-‚Ä¶()[]{}":;/\\ '.indexOf(text[i]) === -1) {
                    return false;
                }
            }
            return true;
        }

        function filterByCity(city) {
            console.log("Filtering by city:", city);
            loadListings(null, city);
        }
        
        let currentEntertainmentCity = '–ù—è—á–∞–Ω–≥';
        
        function filterEntertainmentByCity(city) {
            currentEntertainmentCity = city;
            document.querySelectorAll('.entertainment-city-btn').forEach(btn => {
                btn.style.border = btn.dataset.city === city ? '3px solid #d4af37' : '3px solid transparent';
            });
            loadListings('entertainment', city);
        }
        
        let currentKidsCategory = 'events';
        
        function filterKidsCategory(type) {
            currentKidsCategory = type;
            document.querySelectorAll('.kids-category-btn').forEach(btn => {
                btn.style.border = btn.dataset.type === type ? '3px solid #d4af37' : '3px solid transparent';
            });
            loadKidsFeed(type);
        }
        
        function loadKidsFeed(type) {
            const feed = document.getElementById('kids-feed');
            feed.innerHTML = '<div class="loading"><div class="spinner"></div></div>';
            
            fetch(`/api/listings/kids?country=${currentCountry}&kids_type=${type}&_t=${Date.now()}`)
                .then(r => r.json())
                .then(data => {
                    if (!data || data.length === 0) {
                        feed.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">–û–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>';
                        return;
                    }
                    
                    let html = '<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">' + data.map(item => {
                        let images = item.all_images || (item.image_url ? [item.image_url] : []);
                        let sliderHtml = '';
                        
                        if (images.length > 0) {
                            sliderHtml = `<div style="width: 100%; height: 180px; overflow: hidden; border-radius: 8px 8px 0 0; position: relative;">
                                <img src="${images[0]}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.src='/static/images/placeholder.jpg'">
                                <div style="position: absolute; top: 8px; left: 8px; display: flex; flex-direction: column; gap: 4px;">
                                    ${item.city ? `<span style="background: #FF9800; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600;">üìç ${item.city}</span>` : ''}
                                    ${item.age ? `<span style="background: #9C27B0; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600;">üë∂ ${item.age}</span>` : ''}
                                </div>
                            </div>`;
                        } else {
                            sliderHtml = `<div style="width: 100%; height: 180px; background: linear-gradient(135deg, #FFE0B2 0%, #FFCC80 100%); border-radius: 8px 8px 0 0; position: relative; display: flex; align-items: center; justify-content: center;">
                                <span style="font-size: 48px;">üè´</span>
                                <div style="position: absolute; top: 8px; left: 8px; display: flex; flex-direction: column; gap: 4px;">
                                    ${item.city ? `<span style="background: #FF9800; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600;">üìç ${item.city}</span>` : ''}
                                    ${item.age ? `<span style="background: #9C27B0; color: white; padding: 4px 10px; border-radius: 4px; font-size: 12px; font-weight: 600;">üë∂ ${item.age}</span>` : ''}
                                </div>
                            </div>`;
                        }
                        
                        return `<div style="background: white; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 2px 8px rgba(0,0,0,0.05); overflow: hidden;">
                            ${sliderHtml}
                            <div style="padding: 15px;">
                                <h4 style="margin: 0 0 10px 0; color: #333; font-size: 15px;">${item.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h4>
                                <p style="margin: 0 0 10px 0; color: #666; font-size: 13px; line-height: 1.5; white-space: pre-line;">${(item.description || '').substring(0, 250)}...</p>
                                <div style="font-size: 12px; color: #999;">${item.date || ''}</div>
                            </div>
                        </div>`;
                    }).join('') + '</div>';
                    
                    feed.innerHTML = html;
                })
                .catch(err => {
                    feed.innerHTML = '<p style="text-align: center; color: #ff6b6b; padding: 40px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</p>';
                });
        }
        
        let currentRestaurantCity = '–ù—è—á–∞–Ω–≥';
        let currentRestaurantType = 'all';
        
        function filterRestaurantsByCity(city) {
            currentRestaurantCity = city;
            document.querySelectorAll('.restaurant-city-btn').forEach(btn => {
                btn.style.border = btn.dataset.city === city ? '3px solid #d4af37' : '3px solid transparent';
            });
            loadListings('restaurants', city);
        }
        
        function filterRestaurantType(type) {
            currentRestaurantType = type;
            document.querySelectorAll('.rest-type-btn').forEach(btn => {
                if (btn.dataset.type === type) {
                    btn.style.background = '#d4af37';
                    btn.style.color = 'white';
                    btn.style.border = 'none';
                } else {
                    btn.style.background = '#fff';
                    btn.style.color = '#333';
                    btn.style.border = '2px solid #ccc';
                }
            });
            loadListings('restaurants', currentRestaurantCity);
        }
        
        function searchNearby5km() {
            if (!navigator.geolocation) {
                alert('–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º');
                return;
            }
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    const url = `https://www.google.com/maps/search/restaurants/@${lat},${lon},14z`;
                    window.open(url, '_blank');
                },
                (error) => {
                    alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏.');
                }
            );
        }

        let currentToursCity = '–ù—è—á–∞–Ω–≥';
        
        function filterToursByCity(city) {
            currentToursCity = city;
            document.querySelectorAll('.tours-city-btn').forEach(btn => {
                btn.style.border = btn.dataset.city === city ? '3px solid #d4af37' : '3px solid transparent';
            });
            loadListings('tours', city);
        }

        let currentTransportType = 'bikes';
        
        function filterTransportByType(type) {
            currentTransportType = type;
            document.querySelectorAll('.transport-type-btn').forEach(btn => {
                btn.style.border = btn.dataset.type === type ? '3px solid #d4af37' : '3px solid transparent';
            });
            loadListings('transport', type);
        }

        let currentRealEstateCity = 'nhatrang';
        let currentRealEstateSort = '';
        let currentRealEstateType = '';
        let currentRealEstatePriceMax = null;
        
        function filterRealEstateByCity(city) {
            currentRealEstateCity = city;
            document.querySelectorAll('.realestate-city-btn').forEach(btn => {
                btn.style.border = btn.dataset.city === city ? '3px solid #d4af37' : '3px solid transparent';
            });
            loadListings('real_estate');
        }
        
        function filterRealEstateType(type) {
            if (currentRealEstateType === type) {
                currentRealEstateType = '';
                document.querySelectorAll('.filter-type-btn').forEach(btn => btn.style.background = '#fff');
            } else {
                currentRealEstateType = type;
                document.querySelectorAll('.filter-type-btn').forEach(btn => btn.style.background = '#fff');
                document.getElementById('filter-' + type).style.background = type === 'rent' ? '#2196F3' : '#4CAF50';
                document.getElementById('filter-' + type).style.color = '#fff';
            }
            document.querySelectorAll('.filter-type-btn').forEach(btn => {
                if (btn.id !== 'filter-' + currentRealEstateType) {
                    btn.style.color = '#333';
                }
            });
            loadListings('real_estate');
        }
        
        function sortRealEstate(sortType) {
            currentRealEstateSort = sortType;
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.style.background = '#fff';
                btn.style.color = '#333';
            });
            loadListings('real_estate');
        }
        
        function filterRealEstatePrice(maxPrice) {
            currentRealEstatePriceMax = maxPrice;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.style.background = '#fff';
                btn.style.color = '#333';
            });
            loadListings('real_estate');
        }
        
        function resetRealEstateFilters() {
            currentRealEstateSort = '';
            currentRealEstatePriceMax = null;
            currentRealEstateType = '';
            document.querySelectorAll('.sort-btn, .filter-btn, .filter-type-btn').forEach(btn => {
                btn.style.background = '#fff';
                btn.style.color = '#333';
            });
            loadListings('real_estate');
        }
        
        function loadRealEstateCounts() {
            fetch(`/api/listings/real_estate?country=${currentCountry}`)
                .then(r => r.json())
                .then(data => {
                    let nhatrangCount = data.filter(item => (item.city || 'nhatrang') === 'nhatrang').length;
                    let danangCount = data.filter(item => item.city === 'danang').length;
                    document.getElementById('realestate-nhatrang-count').textContent = nhatrangCount + ' –æ–±—ä—è–≤–ª–µ–Ω–∏–π';
                    document.getElementById('realestate-danang-count').textContent = danangCount + ' –æ–±—ä—è–≤–ª–µ–Ω–∏–π';
                });
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatPrice(priceStr) {
            if (!priceStr) return '';
            let str = String(priceStr).toLowerCase();
            let multiplier = 1;
            
            if (str.includes('–º–ª–Ω') || str.includes('mln') || str.includes('–º–∏–ª–ª–∏–æ–Ω')) {
                multiplier = 1000000;
            }
            
            str = str.replace(/,/g, '.');
            let num = parseFloat(str.replace(/[^\d.]/g, ''));
            
            if (isNaN(num) || num === 0) return priceStr;
            
            // –ï—Å–ª–∏ —á–∏—Å–ª–æ –º–∞–ª–µ–Ω—å–∫–æ–µ (1-999), —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —ç—Ç–æ –º–∏–ª–ª–∏–æ–Ω—ã
            if (num < 1000 && multiplier === 1) {
                multiplier = 1000000;
            }
            
            num = num * multiplier;
            
            let formatted = Math.round(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
            return formatted + ' VND';
        }

        function changeListingImage(listingId, direction, event) {
            if (event) event.stopPropagation();
            const slider = document.getElementById(`slider-${listingId}`);
            if (!slider) return;
            
            const imgs = slider.querySelectorAll('img');
            const dots = slider.querySelectorAll('.slider-dot');
            let activeIdx = Array.from(imgs).findIndex(img => img.classList.contains('active'));
            
            imgs[activeIdx].classList.remove('active');
            dots[activeIdx].classList.remove('active');
            
            activeIdx = (activeIdx + direction + imgs.length) % imgs.length;
            
            imgs[activeIdx].classList.add('active');
            dots[activeIdx].classList.add('active');
        }

        function loadListings(category, city = '') {
            if (!category) {
                // Determine category from active tab or current context
                const activeTab = document.querySelector('.tab.active');
                if (activeTab) {
                    const onclick = activeTab.getAttribute('onclick');
                    const match = onclick.match(/'([^']+)'/);
                    if (match) category = match[1];
                }
            }
            if (!category) category = 'restaurants';

            // Map category names if needed
            let displayCategory = category;
            if (category === 'real_estate') displayCategory = 'realestate';
            if (category === 'money_exchange') displayCategory = 'exchange';

            // Show/hide city buttons for Vietnam
            const vietnamToursBtns = document.getElementById('vietnam-tours-buttons');
            if (vietnamToursBtns) {
                vietnamToursBtns.style.display = (category === 'tours' && currentCountry === 'vietnam') ? 'block' : 'none';
            }
            const vietnamRestBtns = document.getElementById('vietnam-restaurants-buttons');
            if (vietnamRestBtns) {
                vietnamRestBtns.style.display = (category === 'restaurants' && currentCountry === 'vietnam') ? 'block' : 'none';
            }
            const vietnamEntBtns = document.getElementById('vietnam-entertainment-buttons');
            if (vietnamEntBtns) {
                vietnamEntBtns.style.display = (category === 'entertainment' && currentCountry === 'vietnam') ? 'block' : 'none';
            }

            let params = new URLSearchParams();
            params.append('country', currentCountry);
            if (city) params.append('city', city);
            
            if (category === 'transport') {
                if (document.getElementById('bike-model')) params.append('model', document.getElementById('bike-model').value);
                if (document.getElementById('bike-year')) params.append('year', document.getElementById('bike-year').value);
                if (document.getElementById('bike-price-min')) params.append('price_min', document.getElementById('bike-price-min').value);
                if (document.getElementById('bike-price-max')) params.append('price_max', document.getElementById('bike-price-max').value);
            }
            
            if (category === 'real_estate') {
                params.append('realestate_city', currentRealEstateCity);
                if (currentRealEstateSort) params.append('sort', currentRealEstateSort);
                if (currentRealEstateType) params.append('listing_type', currentRealEstateType);
                if (currentRealEstatePriceMax) params.append('price_max', currentRealEstatePriceMax);
            }
            
            const url = `/api/listings/${category}?` + params.toString() + '&_t=' + Date.now();
            console.log('Fetching:', url);
            
            fetch(url)
                .then(r => r.json())
                .then(data => {
                    console.log(`DEBUG: API returned ${data.length} items for ${category}`);
                    let gridId = category === 'transport' ? 'transport-grid' : category === 'real_estate' ? 'real_estate-grid' : category + '-grid';
                    
                    let filteredData = data.filter(item => {
                        // –î–ª—è –í—å–µ—Ç–Ω–∞–º–∞ –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö –æ—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —è–∑—ã–∫–∞, —á—Ç–æ–±—ã –Ω–µ —Ç–µ—Ä—è—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è
                        if (currentCountry === 'vietnam' && ['restaurants', 'tours', 'entertainment', 'real_estate', 'transport'].includes(category)) {
                            // –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
                            if (category === 'restaurants' && currentRestaurantType !== 'all') {
                                if (currentRestaurantType === 'high_rating') {
                                    // –§–∏–ª—å—Ç—Ä –ø–æ –≤—ã—Å–æ–∫–æ–º—É —Ä–µ–π—Ç–∏–Ω–≥—É (4.0+)
                                    const rating = parseFloat(item.google_rating) || 0;
                                    if (rating < 4.0) {
                                        return false;
                                    }
                                } else {
                                    const desc = (item.description || item.title || '').toLowerCase();
                                    if (!desc.includes(currentRestaurantType)) {
                                        return false;
                                    }
                                }
                            }
                            return true;
                        }
                        const text = (item.description || item.text || '') + ' ' + (item.title || item.name || '');
                        return !isEnglishOnly(text);
                    });
                    
                    console.log(`DEBUG: Rendering ${filteredData.length} items to ${gridId}`);
                    
                    // –û–±–Ω–æ–≤–∏–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
                    const tabTitle = document.querySelector(`.tab-content[data-tab="${category}"] h2`);
                    if (tabTitle) {
                        const baseTitle = tabTitle.textContent.split(' (')[0];
                        tabTitle.textContent = `${baseTitle} (${filteredData.length})`;
                    }
                    
                    let html = filteredData.length ? filteredData.map(item => {
                        let channelName = (item.source_channel || '').replace('@', '');
                        let tgLink = item.message_id && channelName ? `https://t.me/${channelName}/${item.message_id}` : null;
                        
                        let images = item.all_images || (item.image_url ? [item.image_url] : []);
                        let sliderHtml = '';
                        let badgesHtml = '';
                        let typeLabel = '';
                        if (item.listing_type) {
                            if (item.listing_type.includes('sale') && item.listing_type.includes('rent')) {
                                typeLabel = '<span style="background:#d4af37;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;">üè† –ü—Ä–æ–¥–∞–∂–∞/–ê—Ä–µ–Ω–¥–∞</span>';
                            } else if (item.listing_type.includes('sale')) {
                                typeLabel = '<span style="background:#4CAF50;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;">üè† –ü—Ä–æ–¥–∞–∂–∞</span>';
                            } else if (item.listing_type.includes('rent')) {
                                typeLabel = '<span style="background:#2196F3;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;">üîë –ê—Ä–µ–Ω–¥–∞</span>';
                            }
                        }
                        if (item.rooms || item.area || typeLabel) {
                            badgesHtml = `<div style="position:absolute;top:8px;left:8px;display:flex;gap:6px;z-index:10;flex-wrap:wrap;">
                                ${typeLabel}
                                ${item.rooms ? `<span style="background:rgba(0,0,0,0.75);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;">üõè ${item.rooms}</span>` : ''}
                                ${item.area ? `<span style="background:rgba(0,0,0,0.75);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:600;">üìê ${item.area}m¬≤</span>` : ''}
                            </div>`;
                        }
                        // –ü–µ—Ä–µ–≤–æ–¥ –≥–æ—Ä–æ–¥–∞ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
                        function getCityRu(city) {
                            const cityMap = {
                                'Nha Trang': '–ù—è—á–∞–Ω–≥',
                                'Ho Chi Minh': '–•–æ—à–∏–º–∏–Ω',
                                'Da Nang': '–î–∞–Ω–∞–Ω–≥',
                                'Hanoi': '–•–∞–Ω–æ–π',
                                'Phu Quoc': '–§—É–∫—É–æ–∫',
                                'Phan Thiet': '–§–∞–Ω—Ç—å–µ—Ç',
                                'Cam Ranh': '–ö–∞–º—Ä–∞–Ω—å',
                                'Da Lat': '–î–∞–ª–∞—Ç',
                                'Hoi An': '–•–æ–π–∞–Ω',
                                'Mui Ne': '–ú—É–π–Ω–µ'
                            };
                            return cityMap[city] || city;
                        }
                        
                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –∫—É—Ö–Ω–∏ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤
                        let cuisineType = '';
                        let restTypeBadge = '';
                        let priceCatBadge = '';
                        if (category === 'restaurants') {
                            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —Ç–∏–ø –∑–∞–≤–µ–¥–µ–Ω–∏—è –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é
                            const restType = item.restaurant_type || '';
                            if (restType === '–∫–∞—Ñ–µ') restTypeBadge = '‚òï –ö–∞—Ñ–µ';
                            else if (restType === '–±–∞—Ä') restTypeBadge = 'üç∏ –ë–∞—Ä';
                            else if (restType === '–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã') restTypeBadge = 'ü¶ê –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã';
                            else if (restType === '—Ä–µ—Å—Ç–æ—Ä–∞–Ω') restTypeBadge = 'üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω';
                            
                            // –ö—É—Ö–Ω—è –∏–∑ –ø–æ–ª—è –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏—è
                            if (item.kitchen) {
                                cuisineType = 'üç≥ ' + item.kitchen;
                            } else {
                                const desc = (item.description || '').toLowerCase();
                                if (desc.includes('–≤—å–µ—Ç–Ω–∞–º') || desc.includes('vi·ªát')) cuisineType = 'üçú –í—å–µ—Ç–Ω–∞–º—Å–∫–∞—è';
                                else if (desc.includes('—Ä—É—Å—Å–∫') || desc.includes('–±–æ—Ä—â') || desc.includes('–ø–µ–ª—å–º–µ–Ω')) cuisineType = 'ü•ò –†—É—Å—Å–∫–∞—è';
                                else if (desc.includes('–∏—Ç–∞–ª—å—è–Ω') || desc.includes('–ø–∏—Ü—Ü') || desc.includes('–ø–∞—Å—Ç')) cuisineType = 'üçï –ò—Ç–∞–ª—å—è–Ω—Å–∫–∞—è';
                                else if (desc.includes('—è–ø–æ–Ω') || desc.includes('—Å—É—à–∏') || desc.includes('—Ä–æ–ª–ª')) cuisineType = 'üç£ –Ø–ø–æ–Ω—Å–∫–∞—è';
                                else if (desc.includes('–∫–∏—Ç–∞–π') || desc.includes('–∫–∏—Ç–∞–π—Å–∫')) cuisineType = 'ü•° –ö–∏—Ç–∞–π—Å–∫–∞—è';
                                else if (desc.includes('–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç') || desc.includes('seafood') || desc.includes('—Ä—ã–±')) cuisineType = 'ü¶ê –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã';
                                else if (desc.includes('–±–∞—Ä') || desc.includes('–∫–æ–∫—Ç–µ–π–ª')) cuisineType = 'üç∏ –ë–∞—Ä';
                                else if (desc.includes('–∫–æ—Ñ–µ') || desc.includes('cafe') || desc.includes('–∫–∞—Ñ–µ')) cuisineType = '‚òï –ö–∞—Ñ–µ';
                            }
                            
                            // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é
                            if (!restTypeBadge) {
                                const desc = (item.description || '').toLowerCase();
                                if (desc.includes('–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç') || desc.includes('seafood')) restTypeBadge = 'ü¶ê –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã';
                                else if (desc.includes('–±–∞—Ä') || desc.includes('–∫–æ–∫—Ç–µ–π–ª')) restTypeBadge = 'üç∏ –ë–∞—Ä';
                                else if (desc.includes('–∫–∞—Ñ–µ') || desc.includes('cafe') || desc.includes('–∫–æ—Ñ–µ')) restTypeBadge = '‚òï –ö–∞—Ñ–µ';
                                else restTypeBadge = 'üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω';
                            }
                            
                            // –¶–µ–Ω–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                            const priceCat = item.price_category || '';
                            if (priceCat === 'cheap') priceCatBadge = 'üíµ –î—ë—à–µ–≤–æ';
                            else if (priceCat === 'normal') priceCatBadge = 'üíµüíµ –ù–æ—Ä–º–∞–ª—å–Ω–æ';
                            else if (priceCat === 'expensive') priceCatBadge = 'üíµüíµüíµ –î–æ—Ä–æ–≥–æ';
                            
                            // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥ –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω
                            if (!item.google_rating) {
                                const desc = item.description || '';
                                // –ò—â–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω—ã: "—Ä–µ–π—Ç–∏–Ω–≥ 4.5", "4,5/5", "4.8 –∏–∑ 5", "–æ—Ü–µ–Ω–∫–∞: 4.5", "‚≠ê4.5"
                                const ratingPatterns = [
                                    /—Ä–µ–π—Ç–∏–Ω–≥[:\s]*([345][,\.][0-9])/i,
                                    /–æ—Ü–µ–Ω–∫–∞[:\s]*([345][,\.][0-9])/i,
                                    /([345][,\.][0-9])\s*(?:–∏–∑\s*5|\/5|–∑–≤–µ–∑–¥)/i,
                                    /‚≠ê\s*([345][,\.][0-9])/,
                                    /rating[:\s]*([345][,\.][0-9])/i,
                                    /([345][,\.][0-9])\s*stars?/i
                                ];
                                for (const pattern of ratingPatterns) {
                                    const match = desc.match(pattern);
                                    if (match) {
                                        item.google_rating = match[1].replace(',', '.');
                                        break;
                                    }
                                }
                            }
                        }
                        
                        if (images.length > 0) {
                            sliderHtml = `
                            <div class="card-slider" id="slider-${item.id}" style="position:relative; height: 250px;">
                                <div style="position:absolute;top:8px;left:8px;display:flex;flex-direction:column;gap:4px;z-index:10;">
                                    ${category === 'restaurants' 
                                        ? `<span style="background:#FF5722;color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">${restTypeBadge}</span>`
                                        : (item.listing_type === 'rent' ? '<span style="background:#2196F3;color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">üîë –ê—Ä–µ–Ω–¥–∞</span>' : '<span style="background:#4CAF50;color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">üè† –ü—Ä–æ–¥–∞–∂–∞</span>')
                                    }
                                    ${category === 'restaurants' && cuisineType ? `<span style="background:#795548;color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">${cuisineType}</span>` : ''}
                                    ${category === 'restaurants' && item.city ? `<span style="background:rgba(0,0,0,0.75);color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">üìç ${getCityRu(item.city)}</span>` : ''}
                                    ${category === 'restaurants' && priceCatBadge ? `<span style="background:#d4af37;color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">${priceCatBadge}</span>` : ''}
                                    ${category === 'restaurants' && item.google_rating ? `<span style="background:#FFC107;color:#333;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">‚≠ê ${item.google_rating}</span>` : ''}
                                    ${category !== 'restaurants' && item.area ? `<span style="background:rgba(0,0,0,0.75);color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">üìê ${item.area}m¬≤</span>` : ''}
                                    ${category !== 'restaurants' && item.rooms ? `<span style="background:rgba(0,0,0,0.75);color:#fff;padding:5px 10px;border-radius:4px;font-size:13px;font-weight:600;">üõè ${item.rooms} –∫–æ–º–Ω.</span>` : ''}
                                </div>
                                ${images.map((img, idx) => {
                                    // –§–æ—Ä—Å–∏—Ä—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –¥–ª—è GitHub Raw
                                    let finalImg = img;
                                    if (img.includes('github.com') && !img.includes('raw.githubusercontent.com')) {
                                        finalImg = img.replace('github.com', 'raw.githubusercontent.com').replace('/blob/', '/');
                                    }
                                    return `<img src="${finalImg}" class="${idx === 0 ? 'active' : ''}" data-idx="${idx}" onerror="this.onerror=null;this.src='/static/images/placeholder.jpg';this.classList.add('active');" loading="lazy">`;
                                }).join('')}
                                ${images.length > 1 ? `
                                    <button class="slider-nav prev" onclick="changeListingImage('${item.id}', -1, event)">‚Äπ</button>
                                    <button class="slider-nav next" onclick="changeListingImage('${item.id}', 1, event)">‚Ä∫</button>
                                    <div class="slider-dots">
                                        ${images.map((_, idx) => `<div class="slider-dot ${idx === 0 ? 'active' : ''}" data-idx="${idx}"></div>`).join('')}
                                    </div>
                                ` : ''}
                            </div>`;
                        }

                        // Format description with bold labels and link from "OBJECT"
                        // –°–Ω–∞—á–∞–ª–∞ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ–º HTML —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å XSS –∏ —Å–ª–æ–º–∞–Ω–Ω–æ–π —Ä–∞–∑–º–µ—Ç–∫–∏
                        let descText = escapeHtml((item.description || item.text || '').substring(0, 1000));
                        descText = descText
                            .replace(/(–û–ë–™–ï–ö–¢:|–û–±—ä–µ–∫—Ç:)/g, tgLink ? `<a href="${tgLink}" target="_blank" style="color:inherit; font-weight:bold; text-decoration:underline;">$1</a>` : '<b>$1</b>')
                            .replace(/(–¶–µ–Ω–∞:|–¶–ï–ù–ê:)/g, '<b>$1</b>')
                            .replace(/(–†–∞–π–æ–Ω:|–†–ê–ô–û–ù:)/g, '<b>$1</b>')
                            .replace(/(–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:|–†–ê–°–ü–û–õ–û–ñ–ï–ù–ò–ï:)/g, '<b>$1</b>')
                            .replace(/(–ü–ª–æ—â–∞–¥—å:|–ü–õ–û–©–ê–î–¨:)/g, '<b>$1</b>')
                            .replace(/(–ú–µ–±–µ–ª—å:|–ú–ï–ë–ï–õ–¨:)/g, '<b>$1</b>')
                            .replace(/(–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:|–ù–ê–ü–†–ê–í–õ–ï–ù–ò–ï:)/g, '<b>$1</b>')
                            .replace(/(–†—è–¥–æ–º:|–†–Ø–î–û–ú:)/g, '<b>$1</b>')
                            .replace(/(–°—Ç—Ä—É–∫—Ç—É—Ä–∞:|–°–¢–†–£–ö–¢–£–†–ê:)/g, '<b>$1</b>')
                            .replace(/(–¶–µ–Ω–∞:|–¶–ï–ù–ê:)([^<\n]+)/gi, '<b>$1</b>$2 <span style="color:#2196F3; font-weight:bold;">[+84-0797 018 179]</span>');

                        // –í—Å–µ–≥–¥–∞ –∏–∑–≤–ª–µ–∫–∞–µ–º —Ü–µ–Ω—É –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è (–ø–æ–ª–µ price –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ—Ä—á–µ–Ω–æ)
                        let displayPrice = '';
                        const desc = item.description || item.text || '';
                        // –ò—â–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω—ã: "40 000 000 VND", "4,600,000‚Ç´", "$500", "500$", "–¶–ï–ù–ê 6 –ú–ò–õ–õ–ò–û–ù–û–í"
                        const pricePatterns = [
                            /(\d[\d\s,.]*\d*)\s*(?:VND|vnd|‚Ç´|vnƒë)/i,
                            /(?:–¶–ï–ù–ê|–¶–µ–Ω–∞|Price|PRICE)[:\s-]*(\d[\d\s,.]*)\s*(?:–ú–ò–õ–õ–ò–û–ù|–º–ª–Ω|M|VND|‚Ç´|\$|USD)?/i,
                            /(\$\s*[\d,.\s]+|\d[\d,.\s]+\s*\$)/,
                            /(\d[\d\s,.]+)\s*(?:USD|USDT|THB|IDR|—Ä—É–±|–≥—Ä–Ω)/i
                        ];
                        for (const pattern of pricePatterns) {
                            const match = desc.match(pattern);
                            if (match) {
                                displayPrice = match[1].trim();
                                if (desc.includes('$') || desc.toLowerCase().includes('usd')) {
                                    displayPrice = '$' + displayPrice.replace(/\$/g, '');
                                } else {
                                    displayPrice = formatPrice(displayPrice);
                                }
                                break;
                            }
                        }

                        return `
                        <div class="card" style="display: flex; flex-direction: column; height: 100%;">
                            ${sliderHtml}
                            <div style="padding: 15px; display: flex; flex-direction: column; flex-grow: 1;">
                                <h3 style="color:#d4af37; margin-bottom:10px;">
                                    ${tgLink ? `<a href="${tgLink}" target="_blank" style="color:#d4af37; text-decoration:none;">${escapeHtml(item.title || item.name || '–û–±—ä—è–≤–ª–µ–Ω–∏–µ')}</a>` : escapeHtml(item.title || item.name || '–û–±—ä—è–≤–ª–µ–Ω–∏–µ')}
                                </h3>
                                <div style="font-size:13px; color:#444; line-height:1.6; overflow:hidden; display:-webkit-box; -webkit-line-clamp:12; -webkit-box-orient:vertical; margin-bottom:15px; white-space: pre-line;">
                                    ${descText}${(item.description || item.text || '').length > 1000 ? '...' : ''}
                                </div>
                                <div style="margin-top:auto; padding-top:12px; border-top:1px solid #eee;">
                                    <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ –∏ –¥–∞—Ç–∞ -->
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px;">
                                        <div style="background: #f5f5f5; padding: 8px; border-radius: 6px; text-align: center;">
                                            <div style="font-size: 11px; color: #888;">üìÖ –î–∞—Ç–∞</div>
                                            <div style="font-size: 13px; font-weight: 600; color: #333;">${(item.date || '2026-01-05').substring(0, 10)}</div>
                                        </div>
                                        <div style="background: #fff3e0; padding: 8px; border-radius: 6px; text-align: center;">
                                            <div style="font-size: 11px; color: #888;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç</div>
                                            <div style="font-size: 12px; font-weight: 600; color: #e65100;">${item.contact_name || 'gohomenhatrang'}</div>
                                        </div>
                                    </div>
                                    <!-- –¶–µ–Ω–∞ -->
                                    ${displayPrice ? `<div style="background: linear-gradient(135deg, #d4af37, #f4d03f); color: #000; padding: 10px 12px; border-radius: 8px; margin-bottom: 10px; text-align: center;">
                                        <span style="font-size: 18px; font-weight: bold;">üí∞ ${displayPrice}</span>
                                    </div>` : ''}
                                    <!-- WhatsApp –∏ Telegram –∫–Ω–æ–ø–∫–∏ -->
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px;">
                                        <a href="https://api.whatsapp.com/send/?phone=${item.whatsapp || '84797016179'}&text&type=phone_number&app_absent=0" target="_blank" style="display: block; background: #25D366; color: white; padding: 10px; border-radius: 6px; text-align: center; text-decoration: none; font-weight: 600;">
                                            üí¨ WhatsApp
                                        </a>
                                        <a href="https://t.me/${(item.telegram || 'gohomenhatrang').replace('@', '')}" target="_blank" style="display: block; background: #0088cc; color: white; padding: 10px; border-radius: 6px; text-align: center; text-decoration: none; font-weight: 600;">
                                            ‚úàÔ∏è Telegram
                                        </a>
                                    </div>
                                    ${category === 'restaurants' ? `
                                    <!-- Google Maps –∫–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ -->
                                    <a href="https://www.google.com/maps/search/${encodeURIComponent((item.title || item.name || '') + ' ' + (item.location || item.city || 'Vietnam'))}" target="_blank" style="display: block; background: #4285F4; color: white; padding: 10px; border-radius: 6px; text-align: center; text-decoration: none; font-weight: 600; margin-bottom: 10px;">
                                        üìç –û—Ç–∫—Ä—ã—Ç—å –≤ Google Maps
                                    </a>
                                    ` : ''}
                                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                        ${item.external_link ? `<a href="${item.external_link}" target="_blank" style="flex: 1; min-width: 100px; display: inline-block; background: #d4af37; text-decoration: none; text-align: center; padding: 8px; border-radius: 6px; color: white; font-size: 12px; font-weight: 600;">üîó –û—Ä–∏–≥–∏–Ω–∞–ª</a>` : ''}
                                        ${tgLink ? `<a href="${tgLink}" target="_blank" class="btn tg-btn" style="flex: 1; min-width: 100px; display: inline-block; background: #0088cc; text-decoration: none; text-align: center; padding: 8px; border-radius: 6px; color: white; font-size: 12px; font-weight: 600;">‚úàÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>` : ''}
                                    </div>
                                    <div style="display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap;" data-listing-id="${item.id}">
                                        ${adminAuthenticated ? `<button onclick="openEditModal('${item.id}', '${category}')" style="flex: 1; min-width: 80px; padding: 6px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600;">‚úèÔ∏è</button>` : ''}
                                        ${adminAuthenticated ? `<button onclick="openMoveModal('${item.id}', '${category}')" style="flex: 1; min-width: 80px; padding: 6px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600;">‚ÜîÔ∏è</button>` : ''}
                                        ${adminAuthenticated ? `<button onclick="openDeleteModal('${item.id}', '${category}')" style="flex: 1; min-width: 80px; padding: 6px; background: #ff6b6b; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 600;">üóëÔ∏è</button>` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `}).join('') : '<div class="empty">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>';
                    
                    let element = document.getElementById(gridId);
                    if (element) {
                        element.innerHTML = html;
                        const cardCount = element.querySelectorAll('.card').length;
                        console.log(`DEBUG: DOM now has ${cardCount} cards in ${gridId}`);
                    }
                })
                .catch(err => console.error('Error loading listings:', err));
        }

        function saveConfig() {
            const config = {
                channels: document.getElementById('channels').value.split('\n').filter(c => c.trim()),
                auto_parse_interval: parseInt(document.getElementById('parse-interval').value) || 300
            };
            
            fetch(`/api/parser-config?country=${currentCountry}`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(config)
            })
            .then(r => r.json())
            .then(data => alert(data.success ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!' : '–û—à–∏–±–∫–∞'));
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–Ω–Ω–µ—Ä, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –∫—É—Ä—Å—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        loadBanners();
        
        updateRates();
        loadStats();
        setInterval(updateRates, 60000);
        setInterval(loadStats, 5000);
        
        const visitorId = 'user_' + Math.random().toString(36).substr(2, 9);
        function pingOnline() {
            fetch(`/api/ping?uid=${visitorId}`)
                .then(r => r.json())
                .then(data => {
                    document.getElementById('online-count').textContent = data.online || 0;
                })
                .catch(() => {});
        }
        pingOnline();
        setInterval(pingOnline, 30000);

        // Duplicate updateBanner removed - using the one defined above

        let adminAuthenticated = false;
        let adminPassword_val = '';
        const adminPassword = document.getElementById('admin-password');
        const adminStatus = document.getElementById('admin-status');
        const adminTools = document.getElementById('admin-tools');

        function openDeleteModal(listingId, category) {
            console.log('Opening delete modal for:', listingId, 'from:', category);
            document.getElementById('delete-modal-id').textContent = 'ID: ' + listingId;
            document.getElementById('delete-modal').setAttribute('data-id', listingId);
            document.getElementById('delete-modal').setAttribute('data-category', category);
            document.getElementById('delete-modal').style.display = 'flex';
        }

        async function openEditModal(listingId, category) {
            console.log('Opening edit modal for:', listingId, 'from:', category);
            document.getElementById('edit-modal-id').textContent = 'ID: ' + listingId;
            document.getElementById('edit-modal').setAttribute('data-id', listingId);
            document.getElementById('edit-modal').setAttribute('data-category', category);
            document.getElementById('edit-status').style.display = 'none';
            
            const restaurantFields = document.getElementById('edit-restaurant-fields');
            const realestateFields = document.getElementById('edit-realestate-fields');
            if (category === 'restaurants') {
                restaurantFields.style.display = 'block';
                realestateFields.style.display = 'none';
            } else {
                restaurantFields.style.display = 'none';
                realestateFields.style.display = 'block';
            }
            
            try {
                const response = await fetch('/api/admin/get-listing', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        password: adminPassword_val,
                        country: currentCountry,
                        category: category,
                        listing_id: listingId
                    })
                });
                const data = await response.json();
                
                if (data.error) {
                    alert('–û—à–∏–±–∫–∞: ' + data.error);
                    return;
                }
                
                document.getElementById('edit-title').value = data.title || '';
                document.getElementById('edit-description').value = data.description || '';
                document.getElementById('edit-price').value = data.price || '';
                document.getElementById('edit-rooms').value = data.rooms || '';
                document.getElementById('edit-area').value = data.area || '';
                document.getElementById('edit-date').value = data.date ? data.date.split('T')[0] : '';
                document.getElementById('edit-contact-name').value = data.contact_name || '';
                document.getElementById('edit-whatsapp').value = data.whatsapp || '';
                document.getElementById('edit-telegram').value = data.telegram || '';
                const listingType = data.listing_type || '';
                document.getElementById('edit-type-sale').checked = listingType.includes('sale');
                document.getElementById('edit-type-rent').checked = listingType.includes('rent');
                
                if (category === 'restaurants') {
                    document.getElementById('edit-city').value = data.city || '';
                    document.getElementById('edit-kitchen').value = data.kitchen || '';
                    document.getElementById('edit-google-maps').value = data.google_maps || '';
                    document.getElementById('edit-google-rating').value = data.google_rating || '';
                    const restType = data.restaurant_type || '—Ä–µ—Å—Ç–æ—Ä–∞–Ω';
                    document.querySelectorAll('input[name="edit-restaurant-type"]').forEach(r => {
                        r.checked = r.value === restType;
                    });
                    const priceCategory = data.price_category || 'normal';
                    document.querySelectorAll('input[name="edit-price-category"]').forEach(r => {
                        r.checked = r.value === priceCategory;
                    });
                }
                
                document.getElementById('edit-modal').style.display = 'flex';
            } catch (err) {
                console.error('Error loading listing:', err);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ');
            }
        }

        async function saveEditFromCard() {
            const modal = document.getElementById('edit-modal');
            const listingId = modal.getAttribute('data-id');
            const category = modal.getAttribute('data-category');
            const status = document.getElementById('edit-status');
            
            const updates = {
                title: document.getElementById('edit-title').value,
                description: document.getElementById('edit-description').value,
                price: document.getElementById('edit-price').value,
                rooms: document.getElementById('edit-rooms').value,
                area: document.getElementById('edit-area').value,
                date: document.getElementById('edit-date').value,
                contact_name: document.getElementById('edit-contact-name').value,
                whatsapp: document.getElementById('edit-whatsapp').value,
                telegram: document.getElementById('edit-telegram').value,
                listing_type: [
                    document.getElementById('edit-type-sale').checked ? 'sale' : '',
                    document.getElementById('edit-type-rent').checked ? 'rent' : ''
                ].filter(t => t).join(',') || null
            };
            
            if (category === 'restaurants') {
                updates.city = document.getElementById('edit-city').value;
                updates.kitchen = document.getElementById('edit-kitchen').value;
                updates.google_maps = document.getElementById('edit-google-maps').value;
                updates.google_rating = document.getElementById('edit-google-rating').value;
                updates.restaurant_type = document.querySelector('input[name="edit-restaurant-type"]:checked')?.value || '—Ä–µ—Å—Ç–æ—Ä–∞–Ω';
                updates.price_category = document.querySelector('input[name="edit-price-category"]:checked')?.value || 'normal';
            }
            
            status.textContent = '‚è≥ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
            status.style.color = '#666';
            status.style.display = 'block';
            
            try {
                const response = await fetch('/api/admin/edit-listing', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        password: adminPassword_val,
                        country: currentCountry,
                        category: category,
                        listing_id: listingId,
                        updates: updates
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    status.textContent = '‚úÖ ' + data.message;
                    status.style.color = '#4CAF50';
                    setTimeout(() => {
                        modal.style.display = 'none';
                        loadListings(category);
                    }, 1000);
                } else {
                    status.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    status.style.color = '#ff6b6b';
                }
            } catch (err) {
                console.error('Error saving:', err);
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è';
                status.style.color = '#ff6b6b';
            }
        }

        function renderAdminBanners() {
            const banners = bannerConfig[currentCountry] || [];
            const list = document.getElementById('admin-banners-list');
            if (!list) return;
            
            list.innerHTML = banners.map(url => `
                <div style="position: relative; border-radius: 6px; overflow: hidden; border: 1px solid #ddd; aspect-ratio: 16/9;">
                    <img src="${url}" style="width: 100%; height: 100%; object-fit: cover;">
                    <button onclick="deleteBannerAdmin('${url}')" style="position: absolute; top: 5px; right: 5px; background: rgba(255,0,0,0.8); color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer; font-size: 10px;">üóëÔ∏è</button>
                </div>
            `).join('');
        }

        async function uploadBannerAdmin() {
            const input = document.getElementById('banner-upload-input');
            const status = document.getElementById('banner-upload-status');
            if (!input.files || !input.files[0]) return;
            
            const formData = new FormData();
            formData.append('file', input.files[0]);
            formData.append('country', currentCountry);
            formData.append('password', adminPassword_val);
            
            status.textContent = '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...';
            status.style.color = '#666';
            
            try {
                const r = await fetch('/api/admin/upload-banner', {
                    method: 'POST',
                    body: formData
                });
                const data = await r.json();
                if (data.success) {
                    status.textContent = '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ!';
                    status.style.color = '#31a24c';
                    input.value = '';
                    await loadBanners();
                } else {
                    status.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + data.error;
                    status.style.color = '#ff6b6b';
                }
            } catch (e) {
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏';
                status.style.color = '#ff6b6b';
            }
        }

        async function deleteBannerAdmin(url) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –±–∞–Ω–Ω–µ—Ä?')) return;
            
            try {
                const r = await fetch('/api/admin/delete-banner', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        password: adminPassword_val,
                        country: currentCountry,
                        url: url
                    })
                });
                const data = await r.json();
                if (data.success) {
                    await loadBanners();
                } else {
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏');
                }
            } catch (e) {
                alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏');
            }
        }

        // ============ –£–ü–†–ê–í–õ–ï–ù–ò–ï –ö–ê–ù–ê–õ–ê–ú–ò ============
        const categoryNames = {
            'chat': '–ß–∞—Ç', 'restaurants': '–†–µ—Å—Ç–æ—Ä–∞–Ω—ã', 'tours': '–≠–∫—Å–∫—É—Ä—Å–∏–∏',
            'transport': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', 'real_estate': '–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å',
            'money_exchange': '–û–±–º–µ–Ω –¥–µ–Ω–µ–≥', 'entertainment': '–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
            'marketplace': '–ë–∞—Ä–∞—Ö–æ–ª–∫–∞', 'visas': '–í–∏–∑–∞—Ä–∞–Ω', 'news': '–ù–æ–≤–æ—Å—Ç–∏',
            'medicine': '–ú–µ–¥–∏—Ü–∏–Ω–∞', 'kids': '–î–ª—è –¥–µ—Ç–µ–π'
        };

        async function loadChannelsAdmin() {
            if (!adminAuthenticated) return;
            
            try {
                const r = await fetch(`/api/admin/channels?country=${currentCountry}`);
                const data = await r.json();
                const container = document.getElementById('channels-list');
                
                let html = '';
                const channels = data.channels || {};
                
                for (const [category, list] of Object.entries(channels)) {
                    if (list && list.length > 0) {
                        html += `<div style="padding: 12px; border-bottom: 1px solid #eee;">
                            <div style="font-weight: 600; color: #1565c0; margin-bottom: 8px;">${categoryNames[category] || category} (${list.length})</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 6px;">`;
                        
                        for (const ch of list) {
                            html += `<div style="display: inline-flex; align-items: center; background: #f5f5f5; padding: 4px 10px; border-radius: 15px; font-size: 12px;">
                                <a href="https://t.me/${ch}" target="_blank" style="color: #0088cc; text-decoration: none;">@${ch}</a>
                                <button onclick="removeChannelAdmin('${category}', '${ch}')" style="background: none; border: none; color: #ff6b6b; cursor: pointer; margin-left: 6px; font-size: 14px;" title="–£–¥–∞–ª–∏—Ç—å">√ó</button>
                            </div>`;
                        }
                        
                        html += '</div></div>';
                    }
                }
                
                if (!html) {
                    html = '<div style="padding: 20px; text-align: center; color: #999;">–ù–µ—Ç –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω—ã</div>';
                }
                
                container.innerHTML = html;
            } catch (e) {
                console.error('Error loading channels:', e);
            }
        }

        async function addChannelAdmin() {
            const category = document.getElementById('channel-category').value;
            const channel = document.getElementById('new-channel-name').value.trim();
            const result = document.getElementById('channel-result');
            
            if (!channel) {
                result.innerHTML = '<span style="color: #ff6b6b;">–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–∞–Ω–∞–ª–∞</span>';
                return;
            }
            
            try {
                const r = await fetch('/api/admin/add-channel', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        password: adminPassword_val,
                        country: currentCountry,
                        category: category,
                        channel: channel
                    })
                });
                const data = await r.json();
                
                if (data.success) {
                    result.innerHTML = '<span style="color: #31a24c;">‚úÖ ' + data.message + '</span>';
                    document.getElementById('new-channel-name').value = '';
                    loadChannelsAdmin();
                } else {
                    result.innerHTML = '<span style="color: #ff6b6b;">‚ùå ' + (data.error || '–û—à–∏–±–∫–∞') + '</span>';
                }
            } catch (e) {
                result.innerHTML = '<span style="color: #ff6b6b;">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏</span>';
            }
        }

        async function removeChannelAdmin(category, channel) {
            if (!confirm(`–£–¥–∞–ª–∏—Ç—å –∫–∞–Ω–∞–ª @${channel}?`)) return;
            
            try {
                const r = await fetch('/api/admin/remove-channel', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        password: adminPassword_val,
                        country: currentCountry,
                        category: category,
                        channel: channel
                    })
                });
                const data = await r.json();
                
                if (data.success) {
                    loadChannelsAdmin();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + (data.error || 'Unknown'));
                }
            } catch (e) {
                alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏');
            }
        }

        // –ö–∞–ø—á–∞
        function loadCaptcha() {
            fetch('/api/captcha')
                .then(r => r.json())
                .then(data => {
                    document.getElementById('captcha-question').textContent = data.question;
                    document.getElementById('captcha-answer').value = data.token;
                });
        }

        // –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
        document.getElementById('submit-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const status = document.getElementById('submit-status');
            status.style.display = 'block';
            status.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            status.style.color = '#666';

            const formData = new FormData();
            formData.append('country', currentCountry);
            formData.append('title', document.getElementById('submit-title').value);
            formData.append('description', document.getElementById('submit-description').value);
            formData.append('price', document.getElementById('submit-price').value || '0');
            formData.append('rooms', document.getElementById('submit-rooms').value);
            formData.append('area', document.getElementById('submit-area').value);
            formData.append('location', document.getElementById('submit-location').value);
            formData.append('city', document.getElementById('submit-city').value);
            formData.append('contact_name', document.getElementById('submit-contact-name').value);
            formData.append('whatsapp', document.getElementById('submit-whatsapp').value);
            formData.append('telegram', document.getElementById('submit-telegram').value);
            
            const listingType = [
                document.getElementById('submit-type-sale').checked ? 'sale' : '',
                document.getElementById('submit-type-rent').checked ? 'rent' : ''
            ].filter(t => t).join(',');
            formData.append('listing_type', listingType);
            
            formData.append('captcha_answer', document.getElementById('submit-captcha').value);
            formData.append('captcha_token', document.getElementById('captcha-answer').value);

            for (let i = 0; i < 4; i++) {
                const file = document.getElementById(`submit-photo-${i}`).files[0];
                if (file) {
                    if (file.size > 1024 * 1024) {
                        status.textContent = `‚ùå –§–æ—Ç–æ ${i+1} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1 –ú–ë`;
                        status.style.color = '#ff6b6b';
                        return;
                    }
                    formData.append(`photo_${i}`, file);
                }
            }

            try {
                const response = await fetch('/api/submit-listing', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                
                if (data.success) {
                    status.textContent = '‚úÖ ' + data.message;
                    status.style.color = '#4CAF50';
                    document.getElementById('submit-form').reset();
                    loadCaptcha();
                } else {
                    status.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    status.style.color = '#ff6b6b';
                    loadCaptcha();
                }
            } catch (err) {
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
                status.style.color = '#ff6b6b';
            }
        });

        function loadRestaurantCaptcha() {
            fetch('/api/captcha')
                .then(r => r.json())
                .then(data => {
                    document.getElementById('restaurant-captcha-question').textContent = data.question;
                    document.getElementById('restaurant-captcha-answer').value = data.token;
                });
        }

        function loadEntertainmentCaptcha() {
            fetch('/api/captcha')
                .then(r => r.json())
                .then(data => {
                    document.getElementById('entertainment-captcha-question').textContent = data.question;
                    document.getElementById('entertainment-captcha-answer').value = data.token;
                });
        }

        function loadTourCaptcha() {
            fetch('/api/captcha')
                .then(r => r.json())
                .then(data => {
                    document.getElementById('tour-captcha-question').textContent = data.question;
                    document.getElementById('tour-captcha-answer').value = data.token;
                });
        }

        function loadTransportCaptcha() {
            fetch('/api/captcha')
                .then(r => r.json())
                .then(data => {
                    document.getElementById('transport-captcha-question').textContent = data.question;
                    document.getElementById('transport-captcha-answer').value = data.token;
                });
        }

        document.getElementById('submit-restaurant-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const status = document.getElementById('restaurant-submit-status');
            status.style.display = 'block';
            status.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            status.style.color = '#666';

            const formData = new FormData();
            formData.append('country', currentCountry);
            formData.append('category', 'restaurants');
            formData.append('title', document.getElementById('restaurant-title').value);
            
            const restaurantType = document.querySelector('input[name="restaurant-type"]:checked')?.value || '—Ä–µ—Å—Ç–æ—Ä–∞–Ω';
            formData.append('restaurant_type', restaurantType);
            
            formData.append('description', document.getElementById('restaurant-description').value);
            formData.append('kitchen', document.getElementById('restaurant-kitchen').value);
            formData.append('location', document.getElementById('restaurant-location').value);
            formData.append('city', document.getElementById('restaurant-city').value);
            formData.append('google_maps', document.getElementById('restaurant-google-maps').value);
            formData.append('contact_name', document.getElementById('restaurant-contact-name').value);
            formData.append('whatsapp', document.getElementById('restaurant-whatsapp').value);
            formData.append('telegram', document.getElementById('restaurant-telegram').value);
            
            const priceCategory = document.querySelector('input[name="restaurant-price-category"]:checked')?.value || 'normal';
            formData.append('price_category', priceCategory);
            
            formData.append('captcha_answer', document.getElementById('restaurant-captcha').value);
            formData.append('captcha_token', document.getElementById('restaurant-captcha-answer').value);

            for (let i = 0; i < 4; i++) {
                const file = document.getElementById(`restaurant-photo-${i}`).files[0];
                if (file) {
                    if (file.size > 1024 * 1024) {
                        status.textContent = `‚ùå –§–æ—Ç–æ ${i+1} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1 –ú–ë`;
                        status.style.color = '#ff6b6b';
                        return;
                    }
                    formData.append(`photo_${i}`, file);
                }
            }

            try {
                const response = await fetch('/api/submit-restaurant', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                
                if (data.success) {
                    status.textContent = '‚úÖ ' + data.message;
                    status.style.color = '#4CAF50';
                    document.getElementById('submit-restaurant-form').reset();
                    loadRestaurantCaptcha();
                } else {
                    status.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    status.style.color = '#ff6b6b';
                    loadRestaurantCaptcha();
                }
            } catch (err) {
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
                status.style.color = '#ff6b6b';
            }
        });

        document.getElementById('submit-entertainment-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const status = document.getElementById('entertainment-submit-status');
            status.style.display = 'block';
            status.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            status.style.color = '#666';

            const formData = new FormData();
            formData.append('country', currentCountry);
            formData.append('category', 'entertainment');
            formData.append('title', document.getElementById('entertainment-title').value);
            formData.append('description', document.getElementById('entertainment-description').value);
            formData.append('feature', document.getElementById('entertainment-feature').value);
            formData.append('location', document.getElementById('entertainment-location').value);
            formData.append('city', document.getElementById('entertainment-city').value);
            formData.append('contact_name', document.getElementById('entertainment-contact-name').value);
            formData.append('whatsapp', document.getElementById('entertainment-whatsapp').value);
            formData.append('telegram', document.getElementById('entertainment-telegram').value);
            
            const capacity = document.querySelector('input[name="entertainment-capacity"]:checked')?.value || '50';
            formData.append('capacity', capacity);
            
            formData.append('captcha_answer', document.getElementById('entertainment-captcha').value);
            formData.append('captcha_token', document.getElementById('entertainment-captcha-answer').value);

            for (let i = 0; i < 4; i++) {
                const file = document.getElementById(`entertainment-photo-${i}`).files[0];
                if (file) {
                    if (file.size > 1024 * 1024) {
                        status.textContent = `‚ùå –§–æ—Ç–æ ${i+1} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1 –ú–ë`;
                        status.style.color = '#ff6b6b';
                        return;
                    }
                    formData.append(`photo_${i}`, file);
                }
            }

            try {
                const response = await fetch('/api/submit-entertainment', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                
                if (data.success) {
                    status.textContent = '‚úÖ ' + data.message;
                    status.style.color = '#4CAF50';
                    document.getElementById('submit-entertainment-form').reset();
                    loadEntertainmentCaptcha();
                } else {
                    status.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    status.style.color = '#ff6b6b';
                    loadEntertainmentCaptcha();
                }
            } catch (err) {
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
                status.style.color = '#ff6b6b';
            }
        });

        document.getElementById('submit-tour-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const status = document.getElementById('tour-submit-status');
            status.style.display = 'block';
            status.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            status.style.color = '#666';

            const formData = new FormData();
            formData.append('country', currentCountry);
            formData.append('category', 'tours');
            formData.append('title', document.getElementById('tour-title').value);
            formData.append('description', document.getElementById('tour-description').value);
            formData.append('days', document.getElementById('tour-days').value);
            formData.append('price', document.getElementById('tour-price').value);
            formData.append('location', document.getElementById('tour-location').value);
            formData.append('city', document.getElementById('tour-city').value);
            formData.append('contact_name', document.getElementById('tour-contact-name').value);
            formData.append('whatsapp', document.getElementById('tour-whatsapp').value);
            formData.append('telegram', document.getElementById('tour-telegram').value);
            
            const groupSize = document.querySelector('input[name="tour-group-size"]:checked')?.value || '5';
            formData.append('group_size', groupSize);
            
            formData.append('captcha_answer', document.getElementById('tour-captcha').value);
            formData.append('captcha_token', document.getElementById('tour-captcha-answer').value);

            for (let i = 0; i < 4; i++) {
                const file = document.getElementById(`tour-photo-${i}`).files[0];
                if (file) {
                    if (file.size > 1024 * 1024) {
                        status.textContent = `‚ùå –§–æ—Ç–æ ${i+1} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1 –ú–ë`;
                        status.style.color = '#ff6b6b';
                        return;
                    }
                    formData.append(`photo_${i}`, file);
                }
            }

            try {
                const response = await fetch('/api/submit-tour', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                
                if (data.success) {
                    status.textContent = '‚úÖ ' + data.message;
                    status.style.color = '#4CAF50';
                    document.getElementById('submit-tour-form').reset();
                    loadTourCaptcha();
                } else {
                    status.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    status.style.color = '#ff6b6b';
                    loadTourCaptcha();
                }
            } catch (err) {
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
                status.style.color = '#ff6b6b';
            }
        });

        document.getElementById('submit-transport-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const status = document.getElementById('transport-submit-status');
            status.style.display = 'block';
            status.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';
            status.style.color = '#666';

            const formData = new FormData();
            formData.append('country', currentCountry);
            formData.append('category', 'transport');
            formData.append('title', document.getElementById('transport-title').value);
            formData.append('description', document.getElementById('transport-description').value);
            formData.append('engine', document.getElementById('transport-engine').value);
            formData.append('year', document.getElementById('transport-year').value);
            formData.append('price', document.getElementById('transport-price').value);
            formData.append('transport_type', document.getElementById('transport-type').value);
            formData.append('location', document.getElementById('transport-location').value);
            formData.append('city', document.getElementById('transport-city').value);
            formData.append('contact_name', document.getElementById('transport-contact-name').value);
            formData.append('whatsapp', document.getElementById('transport-whatsapp').value);
            formData.append('telegram', document.getElementById('transport-telegram').value);
            
            formData.append('captcha_answer', document.getElementById('transport-captcha').value);
            formData.append('captcha_token', document.getElementById('transport-captcha-answer').value);

            for (let i = 0; i < 4; i++) {
                const file = document.getElementById(`transport-photo-${i}`).files[0];
                if (file) {
                    if (file.size > 1024 * 1024) {
                        status.textContent = `‚ùå –§–æ—Ç–æ ${i+1} –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1 –ú–ë`;
                        status.style.color = '#ff6b6b';
                        return;
                    }
                    formData.append(`photo_${i}`, file);
                }
            }

            try {
                const response = await fetch('/api/submit-transport', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();
                
                if (data.success) {
                    status.textContent = '‚úÖ ' + data.message;
                    status.style.color = '#4CAF50';
                    document.getElementById('submit-transport-form').reset();
                    loadTransportCaptcha();
                } else {
                    status.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    status.style.color = '#ff6b6b';
                    loadTransportCaptcha();
                }
            } catch (err) {
                status.textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
                status.style.color = '#ff6b6b';
            }
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        async function loadPendingListings() {
            try {
                const response = await fetch('/api/admin/pending', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ password: adminPassword_val, country: currentCountry })
                });
                const data = await response.json();
                
                if (data.error) {
                    document.getElementById('pending-count').textContent = '‚ùå ' + data.error;
                    return;
                }
                
                document.getElementById('pending-count').textContent = `üìã –û–∂–∏–¥–∞—é—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏: ${data.length}`;
                
                if (data.length === 0) {
                    document.getElementById('pending-list').innerHTML = '<p style="color: #666;">–ù–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é</p>';
                    return;
                }
                
                document.getElementById('pending-list').innerHTML = data.map(item => `
                    <div style="background: #f9f9f9; border-radius: 8px; padding: 15px; border: 1px solid #ddd;">
                        <div style="display: flex; gap: 15px;">
                            ${item.image_url ? `<img src="${item.image_url}" style="width: 120px; height: 90px; object-fit: cover; border-radius: 6px;">` : ''}
                            <div style="flex: 1;">
                                <h4 style="margin: 0 0 5px 0; color: #333;">${item.title}</h4>
                                <p style="margin: 0 0 5px 0; font-size: 13px; color: #666;">${(item.description || '').substring(0, 150)}...</p>
                                <div style="font-size: 12px; color: #999;">
                                    üí∞ ${item.price?.toLocaleString() || '0'} ‚Ä¢ 
                                    üë§ ${item.contact_name || '-'} ‚Ä¢ 
                                    üìû ${item.contact || '-'}
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button onclick="moderateListing('${item.id}', 'approve')" style="flex: 1; padding: 8px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">‚úÖ –û–¥–æ–±—Ä–∏—Ç—å</button>
                            <button onclick="moderateListing('${item.id}', 'reject')" style="flex: 1; padding: 8px; background: #ff6b6b; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                document.getElementById('pending-count').textContent = '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
            }
        }

        async function moderateListing(listingId, action) {
            try {
                const response = await fetch('/api/admin/moderate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        password: adminPassword_val,
                        country: currentCountry,
                        listing_id: listingId,
                        action: action
                    })
                });
                const data = await response.json();
                
                if (data.success) {
                    alert(data.message);
                    loadPendingListings();
                    if (action === 'approve') {
                        loadListings('real_estate');
                    }
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + (data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                }
            } catch (err) {
                alert('–û—à–∏–±–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏');
            }
        }

        function adminAuth() {
            const password = adminPassword.value;
            fetch('/api/admin/auth', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({password})
            })
            .then(r => r.json())
            .then(data => {
                if (data.authenticated) {
                    adminAuthenticated = true;
                    adminPassword_val = password;
                    adminStatus.textContent = '‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω';
                    adminStatus.style.color = '#31a24c';
                    adminTools.style.display = 'block';
                    adminPassword.disabled = true;
                    document.querySelector('button[onclick="adminAuth()"]').disabled = true;
                    renderAdminBanners();
                    loadChannelsAdmin();
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—É—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
                    const currentTab = document.querySelector('.tab.active');
                    if (currentTab) {
                        const tabName = currentTab.getAttribute('data-tab');
                        const categoryMap = {'stats': 'restaurants', 'transport': 'transport', 'realestate': 'real_estate', 'exchange': 'money_exchange'};
                        const category = categoryMap[tabName] || tabName;
                        if (tabName !== 'stats' && tabName !== 'admin' && tabName !== 'settings') loadListings(category);
                    }
                } else {
                    adminStatus.textContent = '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å';
                    adminStatus.style.color = '#ff6b6b';
                }
            })
            .catch(err => {
                adminStatus.textContent = '‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è';
                adminStatus.style.color = '#ff6b6b';
            });
        }

        function openMoveModal(listingId, fromCategory) {
            console.log('Opening move modal for:', listingId, 'from:', fromCategory);
            document.getElementById('move-modal-id').textContent = 'ID: ' + listingId;
            document.getElementById('move-modal').setAttribute('data-id', listingId);
            document.getElementById('move-modal').setAttribute('data-from', fromCategory);
            
            const select = document.getElementById('move-modal-category');
            if (select) select.value = 'restaurants';
            
            document.getElementById('move-modal').style.display = 'flex';
        }

        function confirmMoveFromCard() {
            const modal = document.getElementById('move-modal');
            const listingId = modal.getAttribute('data-id');
            const fromCategory = modal.getAttribute('data-from');
            const toCategory = document.getElementById('move-modal-category').value;

            if (fromCategory === toCategory) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é');
                return;
            }

            fetch('/api/admin/move-listing', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    password: adminPassword_val || adminPassword.value, 
                    country: currentCountry, 
                    from_category: fromCategory, 
                    to_category: toCategory, 
                    listing_id: listingId
                })
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    const card = document.querySelector(`[data-listing-id="${listingId}"]`);
                    if (card) card.remove();
                    modal.style.display = 'none';
                    alert('‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–æ!');
                    setTimeout(() => loadListings(fromCategory), 500);
                } else {
                    alert('‚ùå ' + (data.error || '–û—à–∏–±–∫–∞'));
                }
            })
            .catch(err => alert('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'));
        }

        function confirmDeleteFromCard() {
            const modal = document.getElementById('delete-modal');
            const listingId = modal.getAttribute('data-id');
            const category = modal.getAttribute('data-category');

            fetch('/api/admin/delete-listing', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    password: adminPassword_val || adminPassword.value, 
                    country: currentCountry, 
                    category: category, 
                    listing_id: listingId
                })
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    const card = document.querySelector(`[data-listing-id="${listingId}"]`);
                    if (card) card.remove();
                    modal.style.display = 'none';
                    alert('‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ!');
                    setTimeout(() => loadListings(category), 500);
                } else {
                    alert('‚ùå ' + (data.error || '–û—à–∏–±–∫–∞'));
                }
            })
            .catch(err => alert('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'));
        }

        function deleteListingAdmin() {
            if (!adminAuthenticated) {
                alert('–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å');
                return;
            }
            const category = document.getElementById('delete-category').value;
            const listing_id = document.getElementById('delete-id').value;
            const password = adminPassword.value;
            const result = document.getElementById('delete-result');

            if (!listing_id) {
                result.textContent = '‚ùå –í–≤–µ–¥–∏—Ç–µ ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è';
                result.style.color = '#ff6b6b';
                return;
            }

            fetch('/api/admin/delete-listing', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({password, country: currentCountry, category, listing_id})
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    result.textContent = '‚úÖ ' + data.message;
                    result.style.color = '#31a24c';
                    document.getElementById('delete-id').value = '';
                    loadListings(category);
                } else {
                    result.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    result.style.color = '#ff6b6b';
                }
            })
            .catch(err => {
                result.textContent = '‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';
                result.style.color = '#ff6b6b';
            });
        }

        function moveListingAdmin() {
            if (!adminAuthenticated) {
                alert('–°–Ω–∞—á–∞–ª–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å');
                return;
            }
            const listing_id = document.getElementById('move-id').value;
            const from_category = document.getElementById('move-from').value;
            const to_category = document.getElementById('move-to').value;
            const password = adminPassword.value;
            const result = document.getElementById('move-result');

            if (!listing_id) {
                result.textContent = '‚ùå –í–≤–µ–¥–∏—Ç–µ ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è';
                result.style.color = '#ff6b6b';
                return;
            }

            if (from_category === to_category) {
                result.textContent = '‚ùå –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–ª–∏—á–∞—Ç—å—Å—è';
                result.style.color = '#ff6b6b';
                return;
            }

            fetch('/api/admin/move-listing', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({password, country: currentCountry, from_category, to_category, listing_id})
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    result.textContent = '‚úÖ ' + data.message;
                    result.style.color = '#31a24c';
                    document.getElementById('move-id').value = '';
                    loadListings(from_category);
                } else {
                    result.textContent = '‚ùå ' + (data.error || '–û—à–∏–±–∫–∞');
                    result.style.color = '#ff6b6b';
                }
            })
            .catch(err => {
                result.textContent = '‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';
                result.style.color = '#ff6b6b';
            });
        }
    </script>
</body>
</html>
